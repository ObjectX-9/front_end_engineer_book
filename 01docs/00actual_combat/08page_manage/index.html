<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://s21.ax1x.com/2024/06/14/pkdLxmt.png"
    />
    <link rel="stylesheet" href="/front_end_engineer_book/umi.4c36f7fa.css" />
    <script>
      window.routerBase = "/front_end_engineer_book/";
    </script>
    <script>
      //! umi version: 3.5.17
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.indexOf(e) > -1 ? e : r[0]
        );
      })();
    </script>
    <title>8.三大包管理器&amp;npm工程化&amp;发布流程</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/01docs/00actual_combat/08page_manage" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false" data-use-bg="false" style="padding-bottom:50px;overflow:unset;background-size:cover"><div class="__dumi-default-navbar" data-mode="site" data-is-home="false" style="background-color:#212121"><button class="__dumi-default-navbar-toggle"></button><div class="logo_wrapper"><a class="__dumi-default-navbar-logo" href="/front_end_engineer_book//"><img src="https://s21.ax1x.com/2024/06/14/pkdLxmt.png" alt="ObjectX前端工程化实践"/><span class="label">ObjectX前端工程化实践</span></a><div class="search_wrapper"><div class="__dumi-default-search" data-is-home="false"><svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="1.0" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="主页-登录页" transform="translate(-337.000000, -20.000000)"><g id="顶部导航" transform="translate(28.000000, 0.000000)"><g id="编组-3" transform="translate(309.000000, 20.000000)"><rect id="矩形" opacity="0.0848214286" x="0" y="0" width="24" height="24"></rect><path d="M7.63246763,7.63246763 C9.80909114,5.45584412 13.3380951,5.45584412 15.5147186,7.63246763 C17.5003311,9.61808009 17.6745798,12.7291297 16.0374649,14.9122691 L17.7667903,16.6407545 C18.0777366,16.9517007 18.0777366,17.4558441 17.7667903,17.7667903 C17.4558441,18.0777366 16.9517007,18.0777366 16.6407545,17.7667903 L14.9122691,16.0374649 C12.7291297,17.6745798 9.61808009,17.5003311 7.63246763,15.5147186 C5.45584412,13.3380951 5.45584412,9.80909114 7.63246763,7.63246763 Z M14.3886828,8.75850349 C12.8339517,7.20377241 10.3132346,7.20377241 8.75850349,8.75850349 C7.20377241,10.3132346 7.20377241,12.8339517 8.75850349,14.3886828 C10.3132346,15.9434138 12.8339517,15.9434138 14.3886828,14.3886828 C15.9434138,12.8339517 15.9434138,10.3132346 14.3886828,8.75850349 Z" id="形状结合" fill="#666666" fill-rule="nonzero"></path></g></g></g></g></svg><input type="search" class="__dumi-default-search-input" placeholder="search document..." value=""/><ul></ul></div></div></div><span><nav class="navbar_links"><span class="navbar_links-item"><a aria-current="page" class="active" href="/front_end_engineer_book//01docs">🚀 工程化实践指南</a></span><span class="navbar_links-item"><a href="/front_end_engineer_book//02comp">📚 常见组件实现</a></span><span class="navbar_links-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/ObjectX-9/front_end_engineer_book">⭐️GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span></nav></span></div><ul role="slug-list" class="__dumi-default-layout-toc"><li role="slug-list-title">8.三大包管理器&amp;npm工程化&amp;发布流程</li><li title="🍐 npm" data-depth="1"><a href="#-npm" class="active"><span>🍐 npm</span></a></li><li title="1.npm简介" data-depth="2"><a href="#1npm简介" class=""><span>1.npm简介</span></a></li><li title="2.依赖管理原理&amp;npm install发生了什么？" data-depth="2"><a href="#2依赖管理原理npm-install发生了什么？" class=""><span>2.依赖管理原理&amp;npm install发生了什么？</span></a></li><li title="2.1 早期npm版本【递归】" data-depth="3"><a href="#21-早期npm版本【递归】" class=""><span>2.1 早期npm版本【递归】</span></a></li><li title="2.2 后续的npm版本npm3+【扁平化】" data-depth="3"><a href="#22-后续的npm版本npm3【扁平化】" class=""><span>2.2 后续的npm版本npm3+【扁平化】</span></a></li><li title="3.优缺缺点" data-depth="2"><a href="#3优缺缺点" class=""><span>3.优缺缺点</span></a></li><li title="3.1 递归" data-depth="3"><a href="#31-递归" class=""><span>3.1 递归</span></a></li><li title="3.2 扁平" data-depth="3"><a href="#32-扁平" class=""><span>3.2 扁平</span></a></li><li title="4.package-lock.json的诞生" data-depth="2"><a href="#4package-lockjson的诞生" class=""><span>4.package-lock.json的诞生</span></a></li><li title="🍎 yarn" data-depth="1"><a href="#-yarn" class=""><span>🍎 yarn</span></a></li><li title="1.yarn简介" data-depth="2"><a href="#1yarn简介" class=""><span>1.yarn简介</span></a></li><li title="2.依赖管理原理&amp;yarn install发生了什么？" data-depth="2"><a href="#2依赖管理原理yarn-install发生了什么？" class=""><span>2.依赖管理原理&amp;yarn install发生了什么？</span></a></li><li title="3.相对于npm，yarn有什么不同？" data-depth="2"><a href="#3相对于npm，yarn有什么不同？" class=""><span>3.相对于npm，yarn有什么不同？</span></a></li><li title="4.优缺点" data-depth="2"><a href="#4优缺点" class=""><span>4.优缺点</span></a></li><li title="🍑 pnpm" data-depth="1"><a href="#-pnpm" class=""><span>🍑 pnpm</span></a></li><li title="1.pnpm简介" data-depth="2"><a href="#1pnpm简介" class=""><span>1.pnpm简介</span></a></li><li title="2.硬链接&amp;软连接" data-depth="2"><a href="#2硬链接软连接" class=""><span>2.硬链接&amp;软连接</span></a></li><li title="3.依赖管理原理&amp;pnpm install发生了什么？" data-depth="2"><a href="#3依赖管理原理pnpm-install发生了什么？" class=""><span>3.依赖管理原理&amp;pnpm install发生了什么？</span></a></li><li title="4.相对于yarn、npm，pnpm又优化了什么？" data-depth="2"><a href="#4相对于yarn、npm，pnpm又优化了什么？" class=""><span>4.相对于yarn、npm，pnpm又优化了什么？</span></a></li><li title="5.缺点" data-depth="2"><a href="#5缺点" class=""><span>5.缺点</span></a></li><li title="🥝 npm工程管理" data-depth="1"><a href="#🥝-npm工程管理" class=""><span>🥝 npm工程管理</span></a></li><li title="1.项目版本号管理" data-depth="2"><a href="#1项目版本号管理" class=""><span>1.项目版本号管理</span></a></li><li title="2.模块 tag 管理" data-depth="2"><a href="#2模块-tag-管理" class=""><span>2.模块 tag 管理</span></a></li><li title="🍒 我们来发布一下之前创建的组件库模板" data-depth="1"><a href="#-我们来发布一下之前创建的组件库模板" class=""><span>🍒 我们来发布一下之前创建的组件库模板</span></a></li><li title="1.发布" data-depth="2"><a href="#1发布" class=""><span>1.发布</span></a></li><li title="2.安装测试组件库包" data-depth="2"><a href="#2安装测试组件库包" class=""><span>2.安装测试组件库包</span></a></li><li title="🍋 写在最后" data-depth="1"><a href="#-写在最后" class=""><span>🍋 写在最后</span></a></li></ul><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;https://s21.ax1x.com/2024/06/14/pkdLxmt.png&#x27;)" href="/front_end_engineer_book//"></a><h1>ObjectX前端工程化实践</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a aria-current="page" class="active" href="/front_end_engineer_book//01docs">🚀 工程化实践指南</a></li><li><a href="/front_end_engineer_book//02comp">📚 常见组件实现</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/ObjectX-9/front_end_engineer_book">⭐️GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><ul class="ant-menu ant-menu-root ant-menu-inline ant-menu-light" role="menu" tabindex="0" data-menu-list="true"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">00实战搭建&amp;部署篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat"><span>0.更新日志</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/01init"><span>1.项目初始化&amp;配置</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/02code_specification"><span>2.代码规范</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/03code_quarity"><span>3.代码质量</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/04react_ts"><span>4.react+ts环境搭建</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/05changelog"><span>5.更新日志changelog</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config"><span>6.webpack5基本配置</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/07comp_constructor"><span>7.组件库搭建</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-selected ant-menu-item-only-child"><span class="ant-menu-title-content"><a aria-current="page" class="active" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage"><span>8.三大包管理器&amp;npm工程化&amp;发布流程</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/09git_action"><span>9.Github Action、部署组件库文档</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/10auto_npm_publish"><span>10.自动化篇-手写脚本一键自动tag、发包、引导登录npm</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">01详解-项目搭建篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/01project_construction"><span>项目搭建篇总览</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">02详解-项目打包篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/02project_build"><span>项目打包篇总览</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">03详解-组件库搭建篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/03comp_construction"><span>组件库搭建篇总览</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">04详解-包管理器篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/04package_manager"><span>包管理器篇总览</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">05详解-项目自动化篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/05auto_op"><span>项目自动化篇总览</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">06详解-项目部署篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/06project_deploy"><span>项目部署篇总览</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">07详解-脚手架搭建篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/07cli"><span>脚手架搭建篇总览</span></a></span></li></ul></li></ul><div style="display:none" aria-hidden="true"></div></ul></div></div><div class="__dumi-default-layout-content"><div class="__dumi-default-mobile-content"><article><div class="__dumi-default-content-header markdown no-desc"><h1>8.三大包管理器&npm工程化&发布流程</h1></div><div class="markdown"><h1 id="-npm"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#-npm"><span class="icon icon-link"></span></a>🍐 <code>npm</code></h1><h2 id="1npm简介"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#1npm简介"><span class="icon icon-link"></span></a>1.<code>npm</code>简介</h2><p>npm是JavaScript世界的包管理工具，是 Node.js 的一个模块，负责管理项目中的依赖包。npm 的功能很强大，可以安装、卸载、更新包。它允许我们在代码中引用项目需要的依赖包，并确保项目的依赖结构良好。</p><h2 id="2依赖管理原理npm-install发生了什么？"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#2依赖管理原理npm-install发生了什么？"><span class="icon icon-link"></span></a>2.依赖管理原理&amp;<code>npm install</code>发生了什么？</h2><h3 id="21-早期npm版本【递归】"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#21-早期npm版本【递归】"><span class="icon icon-link"></span></a>2.1 早期npm版本【递归】</h3><p>早期版本如npm1，npm2等，使用的是递归的方式，按照包依赖的树形结构递归遍历安装，每个包和它依赖的包都将全部安装到本地的<code>node_modules</code>下。</p><p>如下的树状结构：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain" data-133-unknown-token="node_modules-0-0">node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">└─ A@x.x.x</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   ├─ index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   ├─ package.json</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   └─ node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      └─ B@x.x.x</span></div><div class="token-line" style="color:#393A34"><span class="token plain">         ├─ index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">         ├─ node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">         └─ package.json</span></div><div class="token-line" style="color:#393A34"><span class="token plain">         C@x.x.x</span></div><div class="token-line" style="color:#393A34"><span class="token plain">         ├─ index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">         ├─ node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">         └─ package.json</span></div></pre></div><h3 id="22-后续的npm版本npm3【扁平化】"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#22-后续的npm版本npm3【扁平化】"><span class="icon icon-link"></span></a>2.2 后续的npm版本npm3+【扁平化】</h3><p>将包安装在项目顶层的<code>node_modules</code>中。当安装到相同模块时，判断已安装的模块版本是否符合新模块的版本范围，如果符合则跳过，不符合则在当前模块的<code>node_modules</code>下安装该模块。</p><p>如下D包的安装方式：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">├── node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── A@x.0.0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    ├─ index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    ├─ node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    │  ├─ D@1.0.0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    │        ├─ index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    │        ├─ node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    │        └─ package.json</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    └─ package.json</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── B@x.0.0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    ├─ index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    ├─ node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    └─ package.json</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── C@x.0.0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    ├─ index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    ├─ node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    └─ package.json</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   └── D@2.0.0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│        ├─ index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│        ├─ node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│        └─ package.json</span></div></pre></div><h2 id="3优缺缺点"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#3优缺缺点"><span class="icon icon-link"></span></a>3.优缺缺点</h2><h3 id="31-递归"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#31-递归"><span class="icon icon-link"></span></a>3.1 递归</h3><p><strong>优点：</strong></p><ul><li>层级结构清晰</li><li>不存在兼容问题</li><li>统一了操作行为和结构</li></ul><p><strong>缺点：</strong></p><ul><li>相同模块大量冗余</li><li>依赖包目录创建结构很深</li></ul><h3 id="32-扁平"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#32-扁平"><span class="icon icon-link"></span></a>3.2 扁平</h3><p>扁平方式并没有完全解决模块重复的问题，如果每个模块依赖的D模块始终都和顶层<code>node_modules</code>中不一致，还是会一直安装重复的模块，</p><p><strong>优点：</strong></p><ul><li>层级嵌套较浅</li><li>减小了磁盘占用</li></ul><p><strong>缺点：</strong></p><ul><li>还是存在相同模块重复的情况</li><li>依赖结构不清晰</li><li>项目可以非法访问没有声明过的包</li><li>比如：如果 A 依赖 B， B 依赖 C，那么 A 就算没有声明 C 的依赖，由于有依赖提升的存在，C 被装到了 A 的<code>node_modules</code>里面，那我在 A 里面用 C。在B更新后，可能存在使用新的C，不需要C，都会报错。</li></ul><h2 id="4package-lockjson的诞生"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#4package-lockjson的诞生"><span class="icon icon-link"></span></a>4.package-lock.json的诞生</h2><p>项目可以非法访问没有声明过的包就是<code>package-lock.json</code>文件诞生的原因之一</p><ul><li><strong>确定性版本控制</strong>：<ul><li><code>package-lock.json</code> 文件可以确保项目在不同环境中安装的依赖包版本是一致的，从而实现确定性版本控制。</li></ul></li><li><strong>避免意外升级</strong>：<ul><li>避免由于依赖包版本不固定导致的意外升级问题，保证在多人协作或多个环境中安装相同的依赖版本。</li></ul></li><li><strong>减少不必要的冲突</strong>：<ul><li>可以减少因依赖包版本冲突而导致的问题，通过锁定每个依赖包的确切版本，避免潜在的冲突。</li></ul></li><li><strong>优化安装速度</strong>：<ul><li><code>package-lock.json</code> 文件提供了依赖包的详细信息，可以减少依赖包的下载和安装时间，因为 npm 可以直接使用锁定文件中的缓存信息。</li></ul></li><li><strong>依赖树扁平化</strong>：<ul><li>通过 <code>package-lock.json</code>，npm 可以更好地管理依赖树的结构，采用更加扁平化的安装方式，避免重复安装相同依赖的不同版本。</li></ul></li><li><strong>增加安全性</strong>：<ul><li><code>package-lock.json</code> 可以帮助检测和防止依赖包的潜在安全漏洞，因为每个包及其依赖项的具体版本都会被记录下来。</li></ul></li></ul><h1 id="-yarn"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#-yarn"><span class="icon icon-link"></span></a>🍎 <code>yarn</code></h1><h2 id="1yarn简介"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#1yarn简介"><span class="icon icon-link"></span></a>1.<code>yarn</code>简介</h2><p>Yarn是由Facebook、Google等公司联合推出的新一代JavaScript包管理工具，针对npm的一些缺点进行了改进，提供了更快、更安全的包管理体验。</p><h2 id="2依赖管理原理yarn-install发生了什么？"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#2依赖管理原理yarn-install发生了什么？"><span class="icon icon-link"></span></a>2.依赖管理原理&amp;<code>yarn install</code>发生了什么？</h2><p>使用扁平化的安装模式跟上面后期的npm一致，</p><h2 id="3相对于npm，yarn有什么不同？"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#3相对于npm，yarn有什么不同？"><span class="icon icon-link"></span></a>3.相对于<code>npm，yarn</code>有什么不同？</h2><p>这些不同大部分都被后续npm的更新给覆盖了，但是并行下载的效率<code>yarn</code>还是要高一些</p><ul><li><p><strong>安装速度优化</strong>:<code>Yarn</code> 通过并行安装，即同时下载和安装多个依赖包，以及并行构建依赖树，从而加快了安装过程的速度。</p></li><li><p><strong>可预测性</strong>: <code>Yarn</code> 使用 <code>yarn.lock</code> 文件来确保每次安装的依赖包版本一致，根据该文件精确地确定要安装的依赖版本，从而提高了项目的可重现性。</p></li><li><p><strong>依赖解析和版本管理</strong>: <code>Yarn</code> 改进了依赖解析算法，有效地减少了依赖树的深度和宽度，优化了依赖包的冲突解决和版本管理，保证了依赖关系的稳定性。</p></li><li><p><strong>缓存机制</strong>: <code>Yarn</code> 使用全局缓存目录，将重复下载的依赖包存储在本地，减少了网络请求，节省了时间和网络带宽。</p></li><li><p><strong>更好的用户体验</strong>: <code>Yarn</code> 提供详细的日志信息，包括进度条、警告和错误信息，使开发者能够更方便地了解安装过程，定位和解决问题，提高了用户体验。</p></li><li><p><strong>离线模式</strong>: <code>Yarn</code> 支持离线模式，通过预先下载依赖包并缓存它们，可以在没有网络连接的情况下仍然能够进行依赖包的安装，提供了更好的灵活性。</p></li><li><p><strong>Workspaces支持</strong>: <code>Yarn</code> 的 Workspaces 功能允许开发者将多个相关的包一起管理，通过一次安装来处理多个包的依赖关系，简化了多包项目的管理流程。</p></li></ul><h2 id="4优缺点"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#4优缺点"><span class="icon icon-link"></span></a>4.优缺点</h2><p><strong>优点</strong></p><ul><li>npm扁平化的优点</li><li>并行下载和本地缓存效率较高</li></ul><p><strong>缺点：</strong></p><ul><li>还是存在幽灵依赖的问题</li><li>并没有根本上解决npm的问题，仅提供了体验上的优化</li></ul><h1 id="-pnpm"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#-pnpm"><span class="icon icon-link"></span></a>🍑 <code>pnpm</code></h1><h2 id="1pnpm简介"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#1pnpm简介"><span class="icon icon-link"></span></a>1.<code>pnpm</code>简介</h2><p>pnpm是另一个流行的包管理器，其核心特点在于共享依赖，以及更加高效地管理依赖项。并且支持monorepo，使用硬链接的方式从根本上解决了幽灵依赖的问题。</p><h2 id="2硬链接软连接"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#2硬链接软连接"><span class="icon icon-link"></span></a>2.硬链接&amp;软连接</h2><p><strong>硬链接</strong>：</p><ul><li>硬链接是文件系统中的一种链接方式，它将一个文件与另一个文件的数据块连接在一起。</li><li>硬链接指向文件的inode节点（在Linux的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为索引节点号(Inode Index)），因此原始文件和硬链接文件都指向相同的数据块。</li><li>对一个文件的硬链接进行修改会影响其他所有硬链接，因为它们实际共享同一份数据。</li><li>硬链接不能跨越文件系统，只能在同一个文件系统中创建。</li><li>硬链接在文件系统中的应用可以节省存储空间，因为数据块不需要多次复制，而是在需要时被多个文件共享。当删除一个硬链接时，只有当所有相关的硬链接被删除后，文件的数据块才会真正释放，否则数据仍然存在于存储介质上。</li></ul><p><strong>软链接（符号链接）</strong> ：</p><ul><li>软链接是一种特殊的文件，其中存储了指向另一个文件的路径。</li><li>软链接本身是一个独立的文件，它的内容是指向另一个文件的路径。如果原始文件更改位置或被删除，软链接就会失效。</li><li>软链接可以跨越文件系统，因为它只存储目标文件的路径信息。</li></ul><p><strong>主要区别：</strong></p><ul><li><strong>数据共享</strong>：硬链接共享相同的数据块，而软链接指向另一个文件。</li><li><strong>删除文件</strong>：删除原始文件后，硬链接仍然可以访问数据，而软链接失效。</li><li><strong>跨文件系统</strong>：硬链接不能跨文件系统，软链接可以在不同文件系统间创建链接。</li></ul><h2 id="3依赖管理原理pnpm-install发生了什么？"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#3依赖管理原理pnpm-install发生了什么？"><span class="icon icon-link"></span></a>3.依赖管理原理&amp;<code>pnpm install</code>发生了什么？</h2><p>pnpm安装的时候将包和包的依赖全都放置在同一个node_module下面，示例如下，硬连接就是同一个文件的不同引用，而软链接是新建一个文件，文件内容指向另一个路径，等于说就是我在某个全局的地方存储了所有包和依赖硬链接到了.pnpm下，然后我用link软链接去连接所有的包，构成原始的依赖结构。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">├── node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── A@x.0.0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    ├─ index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    ├─ node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    └─ package.json</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── B@x.0.0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    ├─ index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    ├─ node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    └─ package.json</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── C@x.0.0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    ├─ index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    ├─ node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │    └─ package.json</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── D@2.0.0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │     ├─ index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │     ├─ node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │     └─ package.json</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   └── D@2.0.0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│        ├─ index.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│        ├─ node_modules</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│        └─ package.json</span></div></pre></div><h2 id="4相对于yarn、npm，pnpm又优化了什么？"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#4相对于yarn、npm，pnpm又优化了什么？"><span class="icon icon-link"></span></a>4.相对于<code>yarn、npm</code>，<code>pnpm</code>又优化了什么？</h2><ul><li>节省磁盘空间</li><li>解决了幽灵依赖当然lock文件也解决了这个问题。</li><li>并且通过链接而不是复制的方式，更快。</li></ul><h2 id="5缺点"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#5缺点"><span class="icon icon-link"></span></a>5.缺点</h2><p>没有在<code>pageage.json</code>中的包是不会被下载的，这导致使用某些第三方包的时候，如果在<code>pageage.json</code>未声明过，则不会下载，你会发现<code>npm|yarn</code>能跑，pnpm不能跑</p><h1 id="🥝-npm工程管理"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#🥝-npm工程管理"><span class="icon icon-link"></span></a>🥝 npm工程管理</h1><h2 id="1项目版本号管理"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#1项目版本号管理"><span class="icon icon-link"></span></a>1.项目版本号管理</h2><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npm version (v)1.0.0  # 显示设置版本号为 1.0.0, v可要可不要</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm version major  # 大版本号加 1，其余版本号归 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm version minor  # 小版本号加 1，修订号归 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm version patch  # 修订号加 1</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-136-unknown-token="-4-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># 当前版本号为 1.0.0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm version prepatch  # 版本号变为 1.0.0-0，也就是 1.0.0 版本的第一个预发布版本</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm version preminor  # 版本号变为 1.1.0-0，也就是 1.1.0 版本的第一个预发布版本</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm version premajor  # 版本号变为 2.0.0-0，也就是 2.0.0 版本的第一个预发布版本</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm version prerelease  # 版本号变为 2.0.0-1，也就是使预发布版本号加一</span></div></pre></div><h2 id="2模块-tag-管理"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#2模块-tag-管理"><span class="icon icon-link"></span></a>2.模块 tag 管理</h2><p>在npm中，<code>tag</code> 是用于标记软件包版本的一种机制。每个发布的软件包都可以分配一个或多个标签，以便用户可以轻松地选择要安装的版本。默认情况下，npm会将<code>latest</code>标签分配给最新发布的版本，但用户也可以为特定版本分配自定义标签，例如<code>beta</code>、<code>alpha</code>等。</p><p>通过使用标签，开发人员可以在软件包的不同版本之间进行区分，同时也可以为测试版或预发布版分配特定的标签，以便用户知道这些版本可能不稳定或仍在开发中。标签还可以用于指定软件包的稳定版本和特定功能版本，让用户更容易地了解要安装的软件包版本。</p><p>基本操作 在npm中，可以使用以下命令来管理软件包的标签：</p><ul><li><p><strong>为软件包发布时指定标签：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npm publish --tag &lt;tagname&gt;</span></div></pre></div><p>这会将发布的软件包版本分配给指定的标签。</p></li><li><p><strong>查看已发布版本的标签：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npm dist-tag ls &lt;package-name&gt;</span></div></pre></div><p>这会列出指定软件包的所有已发布版本及其标签。</p></li><li><p><strong>添加或更新标签：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npm dist-tag add &lt;package-name&gt;@&lt;version&gt; &lt;tagname&gt;</span></div></pre></div><p>这会为指定软件包的特定版本添加或更新标签。</p></li><li><p><strong>移除标签：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npm dist-tag rm &lt;package-name&gt; &lt;tagname&gt;</span></div></pre></div><p>这会移除指定软件包的标签。</p></li><li><p><strong>安装指定标签的软件包：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npm install &lt;package-name&gt;@&lt;tagname&gt;</span></div></pre></div><p>这会安装指定标签的软件包版本。</p></li><li><p><strong>将软件包标签为最新版本：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npm dist-tag add &lt;package-name&gt;@&lt;version&gt; latest</span></div></pre></div><p>这会将指定版本标记为<code>latest</code>，使其成为默认安装版本。</p></li></ul><p>通过这些操作，开发人员可以更灵活地管理软件包的发布版本，并使用户能够方便地选择要安装的版本。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npm dist-tag ls 包名 # 查看包的tag</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-143-unknown-token="-1-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># 当前版本为1.0.1 </span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm version prerelease # 1.0.2-0 </span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm publish --tag beta </span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm dist-tag ls xxx # # beta: 1.0.2-0 </span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm install xxx@beta # 下载beta版本 1.0.2-0</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># 当`prerelease`版本已经稳定了，可以将`prerelease`版本设置为稳定版本：</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm dist-tag add xxx@1.0.2-0 latest</span></div><div class="token-line" style="color:#393A34"><span class="token plain">npm dist-tag ls xxx  # latest: 1.0.2-0</span></div></pre></div><h1 id="-我们来发布一下之前创建的组件库模板"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#-我们来发布一下之前创建的组件库模板"><span class="icon icon-link"></span></a>🍒 我们来发布一下之前创建的组件库模板</h1><h2 id="1发布"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#1发布"><span class="icon icon-link"></span></a>1.发布</h2><p>先验证下npm是否已经登陆</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npm who am i</span></div></pre></div><p><img src="/front_end_engineer_book/static/image-20240615122448566.896b64f2.png" alt="image-20240615122448566"/></p><p>如果没有登陆输入，根据提示输入用户名、密码、邮箱验证。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npm login</span></div></pre></div><p><img src="/front_end_engineer_book/static/image-20240615122454225.4c09c29e.png" alt="image-20240615122454225"/></p><p>登录完成后我们配置需要上传到npm的文件，你可以选择在<code>pageage.json</code>文件中设置file字段，也可以配置<code>.npmignore</code>文件指定不需要发布的文件。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">&quot;files&quot;: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-146-unknown-token="&quot;dist&quot;-1-0">	&quot;dist&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-146-unknown-token="],-2-0">],</span></div></pre></div><p><code>.npmignore</code>文件指定不需要发布的文件</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain" data-147-unknown-token="node_modules-0-0">node_modules</span></div></pre></div><p>我们这里选择，files的配置方式。</p><p>先给我们的组件库模板设置一个版本号</p><p><img src="/front_end_engineer_book/static/image-20240615122502051.ca9b2486.png" alt="image-20240615122502051"/></p><p>发布并设置tag</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npm publish --tag beta</span></div></pre></div><p><img src="/front_end_engineer_book/static/image-20240615122517653.a396ce3a.png" alt="image-20240615122517653"/></p><p>我们去npm看一下，新发布的包是没办法搜到的，但是可以在个人中心查看。</p><p><img src="/front_end_engineer_book/static/image-20240615122523131.d6bb1245.png" alt="image-20240615122523131"/></p><h2 id="2安装测试组件库包"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#2安装测试组件库包"><span class="icon icon-link"></span></a>2.安装测试组件库包</h2><p>新建一个react项目</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npx create-react-app --template typescript comp_test</span></div></pre></div><p>安装一下我们的组件库包</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npm i lint_demo</span></div></pre></div><p><img src="/front_end_engineer_book/static/image-20240615122535085.200d2b71.png" alt="image-20240615122535085"/></p><p>更改一下App.tsx，在引入的时候发现有报错，是因为我们忘记打包了</p><p><img src="/front_end_engineer_book/static/image-20240615122542194.4ae9e976.png" alt="image-20240615122542194"/></p><p><img src="/front_end_engineer_book/static/image-20240615122554478.55321036.png" alt="image-20240615122554478"/>重新打包然后发布一下，重新安装。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">npm i lint_demo@1.0.2-0</span></div></pre></div><p>App.tsx更改如下:</p><div class="__dumi-default-code-block"><pre class="prism-code language-tsx" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f" data-152-tsx-token="import-0-0">import</span><span class="token plain"> </span><span class="token maybe-class-name" data-152-tsx-token="React-0-7">React</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f" data-152-tsx-token="from-0-13">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-152-tsx-token="&#x27;react&#x27;-0-18">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34" data-152-tsx-token=";-0-25">;</span><span class="token plain" data-152-tsx-token="-0-26"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-152-tsx-token="-1-0"></span><span class="token keyword" style="color:#00009f" data-152-tsx-token="import-1-0">import</span><span class="token plain"> logo </span><span class="token keyword" style="color:#00009f" data-152-tsx-token="from-1-12">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-152-tsx-token="&#x27;./logo.svg&#x27;-1-17">&#x27;./logo.svg&#x27;</span><span class="token punctuation" style="color:#393A34" data-152-tsx-token=";-1-29">;</span><span class="token plain" data-152-tsx-token="-1-30"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-152-tsx-token="-2-0"></span><span class="token keyword" style="color:#00009f" data-152-tsx-token="import-2-0">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-152-tsx-token="&#x27;./App.css&#x27;-2-7">&#x27;./App.css&#x27;</span><span class="token punctuation" style="color:#393A34" data-152-tsx-token=";-2-18">;</span><span class="token plain" data-152-tsx-token="-2-19"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-152-tsx-token="-3-0"></span><span class="token keyword" style="color:#00009f" data-152-tsx-token="import-3-0">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-152-tsx-token="{-3-7">{</span><span class="token maybe-class-name" data-152-tsx-token="Button-3-8">Button</span><span class="token punctuation" style="color:#393A34" data-152-tsx-token="}-3-14">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f" data-152-tsx-token="from-3-16">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-152-tsx-token="&#x27;lint_demo&#x27;-3-21">&#x27;lint_demo&#x27;</span><span class="token punctuation" style="color:#393A34" data-152-tsx-token=";-3-32">;</span><span class="token plain" data-152-tsx-token="-3-33"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-152-tsx-token="-4-0"></span><span class="token keyword" style="color:#00009f" data-152-tsx-token="function-4-0">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49" data-152-tsx-token="App-4-9">App</span><span class="token punctuation" style="color:#393A34" data-152-tsx-token="(-4-12">(</span><span class="token punctuation" style="color:#393A34" data-152-tsx-token=")-4-13">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-152-tsx-token="{-4-15">{</span><span class="token plain" data-152-tsx-token="-4-16"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f" data-152-tsx-token="return-5-2">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-152-tsx-token="(-5-9">(</span><span class="token plain" data-152-tsx-token="-5-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&lt;-6-4">&lt;</span><span class="token tag" style="color:#00009f" data-152-tsx-token="div-6-5">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db" data-152-tsx-token="className-6-9">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-152-tsx-token="=-6-18">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-6-19">&quot;</span><span class="token tag attr-value" style="color:#e3116c" data-152-tsx-token="App-6-20">App</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-6-23">&quot;</span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&gt;-6-24">&gt;</span><span class="token plain" data-152-tsx-token="-6-25"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&lt;-7-6">&lt;</span><span class="token tag class-name" style="color:#00009f" data-152-tsx-token="Button-7-7">Button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db" data-152-tsx-token="label-7-14">label</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-152-tsx-token="=-7-19">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&#x27;-7-20">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">Hello World</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&#x27;-7-32">&#x27;</span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&gt;-7-33">&gt;</span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&lt;/-7-34">&lt;/</span><span class="token tag class-name" style="color:#00009f" data-152-tsx-token="Button-7-36">Button</span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&gt;-7-42">&gt;</span><span class="token plain" data-152-tsx-token="-7-43"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&lt;-8-6">&lt;</span><span class="token tag" style="color:#00009f" data-152-tsx-token="header-8-7">header</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db" data-152-tsx-token="className-8-14">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-152-tsx-token="=-8-23">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-8-24">&quot;</span><span class="token tag attr-value" style="color:#e3116c" data-152-tsx-token="App-header-8-25">App-header</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-8-35">&quot;</span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&gt;-8-36">&gt;</span><span class="token plain" data-152-tsx-token="-8-37"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&lt;-9-8">&lt;</span><span class="token tag" style="color:#00009f" data-152-tsx-token="img-9-9">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db" data-152-tsx-token="src-9-13">src</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34" data-152-tsx-token="=-9-16">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34" data-152-tsx-token="{-9-17">{</span><span class="token tag script language-javascript" style="color:#00009f" data-152-tsx-token="logo-9-18">logo</span><span class="token tag script language-javascript punctuation" style="color:#393A34" data-152-tsx-token="}-9-22">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db" data-152-tsx-token="className-9-24">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-152-tsx-token="=-9-33">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-9-34">&quot;</span><span class="token tag attr-value" style="color:#e3116c" data-152-tsx-token="App-logo-9-35">App-logo</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-9-43">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db" data-152-tsx-token="alt-9-45">alt</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-152-tsx-token="=-9-48">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-9-49">&quot;</span><span class="token tag attr-value" style="color:#e3116c" data-152-tsx-token="logo-9-50">logo</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-9-54">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="/&gt;-9-56">/&gt;</span><span class="token plain" data-152-tsx-token="-9-58"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&lt;-10-8">&lt;</span><span class="token tag" style="color:#00009f" data-152-tsx-token="p-10-9">p</span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&gt;-10-10">&gt;</span><span class="token plain" data-152-tsx-token="-10-11"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token maybe-class-name" data-152-tsx-token="Edit-11-10">Edit</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&lt;-11-15">&lt;</span><span class="token tag" style="color:#00009f" data-152-tsx-token="code-11-16">code</span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&gt;-11-20">&gt;</span><span class="token plain" data-152-tsx-token="src-11-21">src</span><span class="token operator" style="color:#393A34" data-152-tsx-token="/-11-24">/</span><span class="token maybe-class-name" data-152-tsx-token="App-11-25">App</span><span class="token punctuation" style="color:#393A34" data-152-tsx-token=".-11-28">.</span><span class="token plain" data-152-tsx-token="tsx-11-29">tsx</span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&lt;/-11-32">&lt;/</span><span class="token tag" style="color:#00009f" data-152-tsx-token="code-11-34">code</span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&gt;-11-38">&gt;</span><span class="token plain"> and save to reload</span><span class="token punctuation" style="color:#393A34" data-152-tsx-token=".-11-58">.</span><span class="token plain" data-152-tsx-token="-11-59"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&lt;/-12-8">&lt;/</span><span class="token tag" style="color:#00009f" data-152-tsx-token="p-12-10">p</span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&gt;-12-11">&gt;</span><span class="token plain" data-152-tsx-token="-12-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&lt;-13-8">&lt;</span><span class="token tag" style="color:#00009f" data-152-tsx-token="a-13-9">a</span><span class="token tag" style="color:#00009f" data-152-tsx-token="-13-10"></span></div><div class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db" data-152-tsx-token="className-14-10">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-152-tsx-token="=-14-19">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-14-20">&quot;</span><span class="token tag attr-value" style="color:#e3116c" data-152-tsx-token="App-link-14-21">App-link</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-14-29">&quot;</span><span class="token tag" style="color:#00009f" data-152-tsx-token="-14-30"></span></div><div class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db" data-152-tsx-token="href-15-10">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-152-tsx-token="=-15-14">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-15-15">&quot;</span><span class="token tag attr-value" style="color:#e3116c" data-152-tsx-token="https://reactjs.org-15-16">https://reactjs.org</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-15-35">&quot;</span><span class="token tag" style="color:#00009f" data-152-tsx-token="-15-36"></span></div><div class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db" data-152-tsx-token="target-16-10">target</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-152-tsx-token="=-16-16">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-16-17">&quot;</span><span class="token tag attr-value" style="color:#e3116c" data-152-tsx-token="_blank-16-18">_blank</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-16-24">&quot;</span><span class="token tag" style="color:#00009f" data-152-tsx-token="-16-25"></span></div><div class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db" data-152-tsx-token="rel-17-10">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-152-tsx-token="=-17-13">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-17-14">&quot;</span><span class="token tag attr-value" style="color:#e3116c">noopener noreferrer</span><span class="token tag attr-value punctuation" style="color:#393A34" data-152-tsx-token="&quot;-17-34">&quot;</span><span class="token tag" style="color:#00009f" data-152-tsx-token="-17-35"></span></div><div class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&gt;-18-8">&gt;</span><span class="token plain" data-152-tsx-token="-18-9"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token maybe-class-name" data-152-tsx-token="Learn-19-10">Learn</span><span class="token plain"> </span><span class="token maybe-class-name" data-152-tsx-token="React-19-16">React</span><span class="token plain" data-152-tsx-token="-19-21"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&lt;/-20-8">&lt;/</span><span class="token tag" style="color:#00009f" data-152-tsx-token="a-20-10">a</span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&gt;-20-11">&gt;</span><span class="token plain" data-152-tsx-token="-20-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&lt;/-21-6">&lt;/</span><span class="token tag" style="color:#00009f" data-152-tsx-token="header-21-8">header</span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&gt;-21-14">&gt;</span><span class="token plain" data-152-tsx-token="-21-15"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&lt;/-22-4">&lt;/</span><span class="token tag" style="color:#00009f" data-152-tsx-token="div-22-6">div</span><span class="token tag punctuation" style="color:#393A34" data-152-tsx-token="&gt;-22-9">&gt;</span><span class="token plain" data-152-tsx-token="-22-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34" data-152-tsx-token=")-23-2">)</span><span class="token punctuation" style="color:#393A34" data-152-tsx-token=";-23-3">;</span><span class="token plain" data-152-tsx-token="-23-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-152-tsx-token="-24-0"></span><span class="token punctuation" style="color:#393A34" data-152-tsx-token="}-24-0">}</span><span class="token plain" data-152-tsx-token="-24-1"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-152-tsx-token="-25-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-152-tsx-token="-26-0"></span><span class="token keyword" style="color:#00009f" data-152-tsx-token="export-26-0">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f" data-152-tsx-token="default-26-7">default</span><span class="token plain"> </span><span class="token maybe-class-name" data-152-tsx-token="App-26-15">App</span><span class="token punctuation" style="color:#393A34" data-152-tsx-token=";-26-18">;</span></div></pre></div><p><code>yarn start</code>效果如下</p><p><img src="/front_end_engineer_book/static/image-20240615122606499.4ed9dc91.png" alt="image-20240615122606499"/></p><h1 id="-写在最后"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/08page_manage#-写在最后"><span class="icon icon-link"></span></a>🍋 写在最后</h1><p>如果您看到这里了，并且觉得这篇文章对您有所帮助，希望您能够点赞👍和收藏⭐支持一下作者🙇🙇🙇，感谢🍺🍺！如果文中有任何不准确之处，也欢迎您指正，共同进步。感谢您的阅读，期待您的点赞👍和收藏⭐！</p><p>感兴趣的同学可以关注下我的公众号ObjectX前端实验室</p><p>🌟 少走弯路 | ObjectX前端实验室 🛠️「精选资源｜实战经验｜技术洞见」</p></div><div class="__dumi-default-layout-footer-meta"><span data-updated-text="Last update: ">6/15/2024 07:19:04</span></div></article></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/front_end_engineer_book/umi.9ab99bfd.js"></script>
  </body>
</html>
