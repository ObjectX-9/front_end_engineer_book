<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://s21.ax1x.com/2024/06/14/pkdLxmt.png"
    />
    <link rel="stylesheet" href="/front_end_engineer_book/umi.4c36f7fa.css" />
    <script>
      window.routerBase = "/front_end_engineer_book/";
    </script>
    <script>
      //! umi version: 3.5.17
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.indexOf(e) > -1 ? e : r[0]
        );
      })();
    </script>
    <title>6.webpack5基本配置</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/01docs/00actual_combat/06webpack5_basic_config" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false" data-use-bg="false" style="padding-bottom:50px;overflow:unset;background-size:cover"><div class="__dumi-default-navbar" data-mode="site" data-is-home="false" style="background-color:#212121"><button class="__dumi-default-navbar-toggle"></button><div class="logo_wrapper"><a class="__dumi-default-navbar-logo" href="/front_end_engineer_book//"><img src="https://s21.ax1x.com/2024/06/14/pkdLxmt.png" alt="ObjectX前端工程化实践"/><span class="label">ObjectX前端工程化实践</span></a><div class="search_wrapper"><div class="__dumi-default-search" data-is-home="false"><svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="1.0" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="主页-登录页" transform="translate(-337.000000, -20.000000)"><g id="顶部导航" transform="translate(28.000000, 0.000000)"><g id="编组-3" transform="translate(309.000000, 20.000000)"><rect id="矩形" opacity="0.0848214286" x="0" y="0" width="24" height="24"></rect><path d="M7.63246763,7.63246763 C9.80909114,5.45584412 13.3380951,5.45584412 15.5147186,7.63246763 C17.5003311,9.61808009 17.6745798,12.7291297 16.0374649,14.9122691 L17.7667903,16.6407545 C18.0777366,16.9517007 18.0777366,17.4558441 17.7667903,17.7667903 C17.4558441,18.0777366 16.9517007,18.0777366 16.6407545,17.7667903 L14.9122691,16.0374649 C12.7291297,17.6745798 9.61808009,17.5003311 7.63246763,15.5147186 C5.45584412,13.3380951 5.45584412,9.80909114 7.63246763,7.63246763 Z M14.3886828,8.75850349 C12.8339517,7.20377241 10.3132346,7.20377241 8.75850349,8.75850349 C7.20377241,10.3132346 7.20377241,12.8339517 8.75850349,14.3886828 C10.3132346,15.9434138 12.8339517,15.9434138 14.3886828,14.3886828 C15.9434138,12.8339517 15.9434138,10.3132346 14.3886828,8.75850349 Z" id="形状结合" fill="#666666" fill-rule="nonzero"></path></g></g></g></g></svg><input type="search" class="__dumi-default-search-input" placeholder="search document..." value=""/><ul></ul></div></div></div><span><nav class="navbar_links"><span class="navbar_links-item"><a aria-current="page" class="active" href="/front_end_engineer_book//01docs">🚀 工程化实践指南</a></span><span class="navbar_links-item"><a href="/front_end_engineer_book//02comp">📚 常见组件实现</a></span><span class="navbar_links-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/ObjectX-9/front_end_engineer_book">⭐️GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span></nav></span></div><ul role="slug-list" class="__dumi-default-layout-toc"><li role="slug-list-title">6.webpack5基本配置</li><li title="安装、配置" data-depth="2"><a href="#安装、配置" class="active"><span>安装、配置</span></a></li><li title="打包出、入口input、output" data-depth="2"><a href="#打包出、入口input、output" class=""><span>打包出、入口input、output</span></a></li><li title="提取公共变量" data-depth="2"><a href="#提取公共变量" class=""><span>提取公共变量</span></a></li><li title="区分开发/生产环境" data-depth="2"><a href="#区分开发生产环境" class=""><span>区分开发/生产环境</span></a></li><li title="cross-env可跨平台设置和使用环境变量" data-depth="2"><a href="#cross-env可跨平台设置和使用环境变量" class=""><span>cross-env可跨平台设置和使用环境变量</span></a></li><li title="本地服务实时查看页面" data-depth="2"><a href="#本地服务实时查看页面" class=""><span>本地服务实时查看页面</span></a></li><li title="devtool &amp; sourcemap" data-depth="2"><a href="#devtool--sourcemap" class=""><span>devtool &amp; sourcemap</span></a></li><li title="打包编译前清理 dist 目录" data-depth="2"><a href="#打包编译前清理-dist-目录" class=""><span>打包编译前清理 dist 目录</span></a></li><li title="样式文件处理" data-depth="2"><a href="#样式文件处理" class=""><span>样式文件处理</span></a></li><li title="处理 .css 文件" data-depth="3"><a href="#处理-css-文件" class=""><span>处理 .css 文件</span></a></li><li title="LESS文件的处理" data-depth="3"><a href="#less文件的处理" class=""><span>LESS文件的处理</span></a></li><li title="SASS 样式文件处理" data-depth="3"><a href="#sass-样式文件处理" class=""><span>SASS 样式文件处理</span></a></li><li title="PostCSS 处理浏览器兼容问题" data-depth="3"><a href="#postcss-处理浏览器兼容问题" class=""><span>PostCSS 处理浏览器兼容问题</span></a></li><li title="处理图片和文件" data-depth="2"><a href="#处理图片和文件" class=""><span>处理图片和文件</span></a></li><li title="🍋 写在最后" data-depth="1"><a href="#-写在最后" class=""><span>🍋 写在最后</span></a></li></ul><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;https://s21.ax1x.com/2024/06/14/pkdLxmt.png&#x27;)" href="/front_end_engineer_book//"></a><h1>ObjectX前端工程化实践</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a aria-current="page" class="active" href="/front_end_engineer_book//01docs">🚀 工程化实践指南</a></li><li><a href="/front_end_engineer_book//02comp">📚 常见组件实现</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/ObjectX-9/front_end_engineer_book">⭐️GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><ul class="ant-menu ant-menu-root ant-menu-inline ant-menu-light" role="menu" tabindex="0" data-menu-list="true"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">00实战搭建&amp;部署篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat"><span>0.更新日志</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/01init"><span>1.项目初始化&amp;配置</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/02code_specification"><span>2.代码规范</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/03code_quarity"><span>3.代码质量</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/04react_ts"><span>4.react+ts环境搭建</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/05changelog"><span>5.更新日志changelog</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-selected ant-menu-item-only-child"><span class="ant-menu-title-content"><a aria-current="page" class="active" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config"><span>6.webpack5基本配置</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/07comp_constructor"><span>7.组件库搭建</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/08page_manage"><span>8.三大包管理器&amp;npm工程化&amp;发布流程</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/09git_action"><span>9.Github Action、部署组件库文档</span></a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/00actual_combat/10auto_npm_publish"><span>10.自动化篇-手写脚本一键自动tag、发包、引导登录npm</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">01详解-项目搭建篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/01project_construction"><span>项目搭建篇总览</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">02详解-项目打包篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/02project_build"><span>项目打包篇总览</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">03详解-组件库搭建篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/03comp_construction"><span>组件库搭建篇总览</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">04详解-包管理器篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/04package_manager"><span>包管理器篇总览</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">05详解-项目自动化篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/05auto_op"><span>项目自动化篇总览</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">06详解-项目部署篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/06project_deploy"><span>项目部署篇总览</span></a></span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">07详解-脚手架搭建篇</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/front_end_engineer_book//01docs/07cli"><span>脚手架搭建篇总览</span></a></span></li></ul></li></ul><div style="display:none" aria-hidden="true"></div></ul></div></div><div class="__dumi-default-layout-content"><div class="__dumi-default-mobile-content"><article><div class="__dumi-default-content-header markdown no-desc"><h1>6.webpack5基本配置</h1></div><div class="markdown"><p>这个图可以大致总结webpack的配置分类和逻辑，webpack的配置其实就是这么一个流程，在打包流程的基础上在优化开发体验和产物优化的配置<img src="/front_end_engineer_book/static/image-20240615121520265.3fd92011.png" alt="image-20240615121520265"/></p><h2 id="安装、配置"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#安装、配置"><span class="icon icon-link"></span></a>安装、配置</h2><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">yarn add webpack@5.90.3 webpack-cli@5.1.4 -D</span></div></pre></div><ul><li>webpack ：这不必多说，其用于编译 JavaScript 模块。</li><li>webpack-cli ：此工具用于在命令行中运行 webpack。 紧接着我们在根目录下新建文件夹 scripts ，在之下再建一个文件夹 config ，在 config 中再建一个 .js 文件 webpack.common.js ，此结构如下：</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain" data-70-unknown-token="scripts/-0-0">scripts/</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    config/</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      webpack.common.js</span></div></pre></div><p>后面会用到webpack-merge，提取公共的逻辑，区分开发环境和生产环境的配置。</p><h2 id="打包出、入口input、output"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#打包出、入口input、output"><span class="icon icon-link"></span></a>打包出、入口input、output</h2><p>这里就是配置webpack打包的输入输出。</p><p>在 Webpack 5 中，配置文件（通常是 webpack.config.js）的输入（entry）和输出（output）是最基本的部分，用于定义 Webpack 应当处理的文件以及它们处理完毕应当输出到哪里。</p><p><strong>输入（entry）</strong></p><p>Webpack 的 Entry 配置项用于定义项目的入口点。Webpack 会从这些入口点开始，解析出项目内的依赖关系。</p><p>基础的单个入口简写语法：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">module.exports = {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  entry: &#x27;./path/to/my/entry/file.js&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-71-unknown-token="};-2-0">};</span></div></pre></div><p>对象语法，当你需要更复杂的配置时使用：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">module.exports = {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  entry: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    main: &#x27;./src/index.js&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    app: &#x27;./src/app.js&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // 可以添加更多入口</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  }</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-72-unknown-token="};-6-0">};</span></div></pre></div><p>常见的配置选项值：</p><ul><li>字符串：单一入口点简化写法。</li><li>数组：当你想对多个文件一起打包但只创建一个 bundle。</li><li>对象：多个入口点，可以创建多个 bundle。适合多页面应用。</li></ul><p><strong>输出（output）</strong></p><p>配置输出属性(output)告诉 Webpack 在哪里输出它所创建的 bundles，以及如何命名这些文件，默认值是 ./dist。 基础配置：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">const path = require(&#x27;path&#x27;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-73-unknown-token="-1-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">module.exports = {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  //...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  output: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    path: path.resolve(__dirname, &#x27;dist&#x27;),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    filename: &#x27;bundle.js&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  }</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-73-unknown-token="};-8-0">};</span></div></pre></div><p>多个入口起点时配置： 如果配置创建了多个单独的 &quot;chunk&quot;（例如，使用多个入口点或使用像 CommonsChunkPlugin 这样的插件），应该使用占位符(substitutions)来确保每个文件具有唯一的名称。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">module.exports = {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  //...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  output: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    path: path.resolve(__dirname, &#x27;dist&#x27;),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    filename: &#x27;[name].bundle.js&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  }</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-74-unknown-token="};-6-0">};</span></div></pre></div><p>常见的配置选项值：</p><ul><li>path：输出文件所在的目录绝对路径。</li><li>filename：指定输出文件的名称。</li><li>publicPath：指定在浏览器中被引用的时候的公共的URL的路径。</li><li>library：暴露库的名称。作为全局变量，当你的库加载完成后，入口起点的返回值将分配给这个变量。</li><li>libraryTarget：在何种形式下导出库。</li><li>chunkFilename：非入口(non-entry) chunk 文件的名称。</li><li>assetModuleFilename：生成的资产(asset)文件名模版。 示例配置：</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">module.exports = {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  //...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  output: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    path: path.resolve(__dirname, &#x27;dist&#x27;),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    filename: &#x27;[name].[contenthash].js&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    publicPath: &#x27;/&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    library: &#x27;MyLibrary&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    libraryTarget: &#x27;umd&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    chunkFilename: &#x27;[id].[chunkhash].js&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    assetModuleFilename: &#x27;images/[hash][ext][query]&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  }</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-75-unknown-token="};-11-0">};</span></div></pre></div><p>我们在webpack.common.js文件中配置如下，</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">const path = require(&#x27;path&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-76-unknown-token="-1-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">module.exports = {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  entry: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    app: path.resolve(__dirname, &#x27;../../src/app.js&#x27;),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  output: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    filename: &#x27;js/[name].[hash:8].js&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    path: path.resolve(__dirname, &#x27;../../dist&#x27;),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  },</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-76-unknown-token="}-10-0">}</span></div></pre></div><p>接下来在根目录创建 src 文件夹，新建 app.js 文件，输入以下代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">const root = document.querySelector(&#x27;#root&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">root.innerHTML = &#x27;hello, webpack!&#x27;</span></div></pre></div><p>现在我们尝试使用刚才的 webpack 配置对其进行打包，那如何操作呢？ 打开 package.json ，为其添加一条 npm 命令：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain" data-78-unknown-token="{-0-0">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;scripts&quot;: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;build&quot;: &quot;webpack --config ./scripts/config/webpack.common.js&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  },</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-78-unknown-token="}-4-0">}</span></div></pre></div><p>测试，在dist下就生成了打包的文件</p><p><img src="/front_end_engineer_book/static/image-20240615121552929.238836c2.png" alt="image-20240615121552929"/></p><p>这里有一个警告，这里是因为我们没有配置打包环境，后面我们配置了之后就不会有了</p><p><img src="/front_end_engineer_book/static/image-20240615121601282.05dd1481.png" alt="image-20240615121601282"/></p><p>这里解释下output.filename的配置方式和原因，</p><p>在 Webpack 中，output.filename 属性是用来定义输出文件的名称的。你可以使用静态名称的字符串，但更常用的是利用占位符来动态地为每个输出文件指定名称。以下是可用的几种配置方式，和几种不同的哈希值类型：</p><p><strong>Filename 配置方式：</strong>静态名称：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">filename: &#x27;bundle.js&#x27;</span></div></pre></div><p>这将会输出一个名为 bundle.js 的文件。</p><p><strong>使用入口点名称：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">filename: &#x27;[name].js&#x27;</span></div></pre></div><p>这里的 [name] 是一个占位符，为每个入口点生成带有其名称的输出文件。</p><p><strong>使用内部 chunk id：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">filename: &#x27;[id].js&#x27;</span></div></pre></div><p>[id] 将会被替换为每个 chunk 的内部唯一标识符。</p><p><strong>根据内容生成的哈希值：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">filename: &#x27;[contenthash].js&#x27;</span></div></pre></div><p>[contenthash] 是文件内容的哈希值，一般用于缓存逻辑。</p><p>聚焦在哈希占位符，Webpack 提供了几种不同类型的哈希值，它们有不同的意图和使用场景：</p><p><strong>Hash 值类型：</strong></p><ul><li><code>[hash]</code>：与整个项目的构建相关的哈希值。不论哪个文件有变化，整个项目构建的哈希值都会改变。</li><li><code>[chunkhash]</code>：与 Webpack 打包过程中生成的 chunk 相关的哈希值。同一 chunk 内文件没有变化时，[chunkhash] 是不变的。它可以用来优化浏览器缓存，因为不同的文件通常被打包进不同的 chunk。</li><li><code>[contenthash]</code>：与文件内容直接相关的哈希值。只有文件内容改变了，<code>[contenthash]</code> 才会改变。这在使用如 css-extract-plugin 分离 CSS 文件时非常有用，因为你可能只希望在 CSS 文件的内容实际发生变化时才改变文件名。</li><li><code>[modulehash]</code>：与单个模块相关的哈希值。</li><li><code>[fullhash]</code>：Webpack 5 引入的哈希值，用来代替旧版本中的 [hash]。</li></ul><p><strong>Hash 值的区别：</strong></p><ul><li><code>[hash]</code> 和 <code>[fullhash]</code> 考虑的是整个编译过程。任何一个文件的改动都会导致所有输出文件的哈希值变化。这意味着即使只有一个文件被修改，缓存的所有文件也因为文件名改变而需要重新获取。</li><li><code>[chunkhash]</code> 是针对每个 chunk 的。如果不同的入口导致了不同的 chunk 输出，那么只有当特定 chunk 中的模块变化时，该 chunk 的文件名才会改变。这允许客户端缓存未变更的 chunks。</li><li><code>[contenthash]</code> 特别适用于 CSS 或其他静态资源离散文件的缓存策略。文件内容改变时，相关文件哈希值变化，未改变的文件则哈希值保持不变，使缓存更有效。</li></ul><p>在使用哈希占位符时，可以指定哈希值的长度，如 <code>[hash:8]</code>，这将输出8个字符长度的哈希值，让文件名更为精简。</p><h2 id="提取公共变量"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#提取公共变量"><span class="icon icon-link"></span></a>提取公共变量</h2><p>在 scripts 下新建一个 constant.js 文件，存放一些用到的常量，项目根目录的绝对路径，开发服务器的端口路径，项目名称等等。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain" data-83-unknown-token="scripts/-0-0">scripts/</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-83-unknown-token="config/-1-0">	config/</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  	webpack.common.js</span></div><div class="token-line" style="color:#393A34"><span class="token plain">+ constant.js</span></div></pre></div><p>在里面定义我们的变量：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">const path = require(&#x27;path&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">// 拼接绝对路径</span></div><div class="token-line" style="color:#393A34"><span class="token plain">const PROJECT_PATH = path.resolve(__dirname, &#x27;../&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">// 项目名</span></div><div class="token-line" style="color:#393A34"><span class="token plain">const PROJECT_NAME = path.parse(PROJECT_PATH).name</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-84-unknown-token="-5-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">module.exports = { </span></div><div class="token-line" style="color:#393A34"><span class="token plain">  PROJECT_PATH,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  PROJECT_NAME</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-84-unknown-token="}-9-0">}</span></div></pre></div><p>然后在 webpack.common.js 中引入，修改代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f" data-85-js-token="const-0-0">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-85-js-token="{-0-6">{</span><span class="token plain" data-85-js-token="resolve-0-7">resolve</span><span class="token punctuation" style="color:#393A34" data-85-js-token="}-0-14">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-85-js-token="=-0-16">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-85-js-token="require-0-18">require</span><span class="token punctuation" style="color:#393A34" data-85-js-token="(-0-25">(</span><span class="token string" style="color:#e3116c" data-85-js-token="&#x27;path&#x27;-0-26">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34" data-85-js-token=")-0-32">)</span><span class="token punctuation" style="color:#393A34" data-85-js-token=";-0-33">;</span><span class="token plain" data-85-js-token="-0-34"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-85-js-token="-1-0"></span><span class="token keyword" style="color:#00009f" data-85-js-token="const-1-0">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-85-js-token="{-1-6">{</span><span class="token constant" style="color:#36acaa" data-85-js-token="PROJECT_PATH-1-7">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-85-js-token="}-1-19">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-85-js-token="=-1-21">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-85-js-token="require-1-23">require</span><span class="token punctuation" style="color:#393A34" data-85-js-token="(-1-30">(</span><span class="token string" style="color:#e3116c" data-85-js-token="&#x27;../constants&#x27;-1-31">&#x27;../constants&#x27;</span><span class="token punctuation" style="color:#393A34" data-85-js-token=")-1-45">)</span><span class="token punctuation" style="color:#393A34" data-85-js-token=";-1-46">;</span><span class="token plain" data-85-js-token="-1-47"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-85-js-token="-2-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-85-js-token="module-3-0">module</span><span class="token punctuation" style="color:#393A34" data-85-js-token=".-3-6">.</span><span class="token property-access" data-85-js-token="exports-3-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-85-js-token="=-3-15">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-85-js-token="{-3-17">{</span><span class="token plain" data-85-js-token="-3-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-85-js-token="entry-4-0">	entry</span><span class="token operator" style="color:#393A34" data-85-js-token=":-4-6">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-85-js-token="{-4-8">{</span><span class="token plain" data-85-js-token="-4-9"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-85-js-token="app-5-0">		app</span><span class="token operator" style="color:#393A34" data-85-js-token=":-5-5">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-85-js-token="resolve-5-7">resolve</span><span class="token punctuation" style="color:#393A34" data-85-js-token="(-5-14">(</span><span class="token constant" style="color:#36acaa" data-85-js-token="PROJECT_PATH-5-15">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-85-js-token=",-5-27">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-85-js-token="&#x27;./src/app.js&#x27;-5-29">&#x27;./src/app.js&#x27;</span><span class="token punctuation" style="color:#393A34" data-85-js-token=")-5-43">)</span><span class="token punctuation" style="color:#393A34" data-85-js-token=",-5-44">,</span><span class="token plain" data-85-js-token="-5-45"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-85-js-token="-6-0">	</span><span class="token punctuation" style="color:#393A34" data-85-js-token="}-6-1">}</span><span class="token punctuation" style="color:#393A34" data-85-js-token=",-6-2">,</span><span class="token plain" data-85-js-token="-6-3"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-85-js-token="output-7-0">	output</span><span class="token operator" style="color:#393A34" data-85-js-token=":-7-7">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-85-js-token="{-7-9">{</span><span class="token plain" data-85-js-token="-7-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-85-js-token="filename-8-0">		filename</span><span class="token operator" style="color:#393A34" data-85-js-token=":-8-10">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-85-js-token="&#x27;js/[name].[hash:8].js&#x27;-8-12">&#x27;js/[name].[hash:8].js&#x27;</span><span class="token punctuation" style="color:#393A34" data-85-js-token=",-8-35">,</span><span class="token plain" data-85-js-token="-8-36"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-85-js-token="path-9-0">		path</span><span class="token operator" style="color:#393A34" data-85-js-token=":-9-6">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-85-js-token="resolve-9-8">resolve</span><span class="token punctuation" style="color:#393A34" data-85-js-token="(-9-15">(</span><span class="token constant" style="color:#36acaa" data-85-js-token="PROJECT_PATH-9-16">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-85-js-token=",-9-28">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-85-js-token="&#x27;./dist&#x27;-9-30">&#x27;./dist&#x27;</span><span class="token punctuation" style="color:#393A34" data-85-js-token=")-9-38">)</span><span class="token punctuation" style="color:#393A34" data-85-js-token=",-9-39">,</span><span class="token plain" data-85-js-token="-9-40"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-85-js-token="-10-0">	</span><span class="token punctuation" style="color:#393A34" data-85-js-token="}-10-1">}</span><span class="token punctuation" style="color:#393A34" data-85-js-token=",-10-2">,</span><span class="token plain" data-85-js-token="-10-3"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-85-js-token="-11-0"></span><span class="token punctuation" style="color:#393A34" data-85-js-token="}-11-0">}</span><span class="token punctuation" style="color:#393A34" data-85-js-token=";-11-1">;</span></div></pre></div><h2 id="区分开发生产环境"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#区分开发生产环境"><span class="icon icon-link"></span></a>区分开发/生产环境</h2><p>开发环境不需要压缩代码，不需要提取css为单文件，但是需要开发服务器等优化开发体验的配置，但是生产环境又不需要，有的又是两个环境都需要的，所以我们需要区分开发、生产环境，我们可以使用<a target="_blank" rel="noopener noreferrer" href="https://github.com/survivejs/webpack-merge">webpack-merge<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>来配置，然后合并。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">yarn add webpack-merge@5.10.0 -D</span></div></pre></div><p>在 scripts/config 下新建文件 webpack.dev.js 作为开发环境配置，并输入以下代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f" data-87-js-token="const-0-0">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-87-js-token="{-0-6">{</span><span class="token plain"> merge </span><span class="token punctuation" style="color:#393A34" data-87-js-token="}-0-14">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-87-js-token="=-0-16">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-87-js-token="require-0-18">require</span><span class="token punctuation" style="color:#393A34" data-87-js-token="(-0-25">(</span><span class="token string" style="color:#e3116c" data-87-js-token="&#x27;webpack-merge&#x27;-0-26">&#x27;webpack-merge&#x27;</span><span class="token punctuation" style="color:#393A34" data-87-js-token=")-0-41">)</span><span class="token plain" data-87-js-token="-0-42"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-87-js-token="-1-0"></span><span class="token keyword" style="color:#00009f" data-87-js-token="const-1-0">const</span><span class="token plain"> common </span><span class="token operator" style="color:#393A34" data-87-js-token="=-1-13">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-87-js-token="require-1-15">require</span><span class="token punctuation" style="color:#393A34" data-87-js-token="(-1-22">(</span><span class="token string" style="color:#e3116c" data-87-js-token="&#x27;./webpack.common.js&#x27;-1-23">&#x27;./webpack.common.js&#x27;</span><span class="token punctuation" style="color:#393A34" data-87-js-token=")-1-44">)</span><span class="token plain" data-87-js-token="-1-45"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-87-js-token="-2-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-87-js-token="module-3-0">module</span><span class="token punctuation" style="color:#393A34" data-87-js-token=".-3-6">.</span><span class="token property-access" data-87-js-token="exports-3-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-87-js-token="=-3-15">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-87-js-token="merge-3-17">merge</span><span class="token punctuation" style="color:#393A34" data-87-js-token="(-3-22">(</span><span class="token plain" data-87-js-token="common-3-23">common</span><span class="token punctuation" style="color:#393A34" data-87-js-token=",-3-29">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-87-js-token="{-3-31">{</span><span class="token plain" data-87-js-token="-3-32"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  mode</span><span class="token operator" style="color:#393A34" data-87-js-token=":-4-6">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-87-js-token="&#x27;development&#x27;-4-8">&#x27;development&#x27;</span><span class="token punctuation" style="color:#393A34" data-87-js-token=",-4-21">,</span><span class="token plain" data-87-js-token="-4-22"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-87-js-token="-5-0"></span><span class="token punctuation" style="color:#393A34" data-87-js-token="}-5-0">}</span><span class="token punctuation" style="color:#393A34" data-87-js-token=")-5-1">)</span></div></pre></div><p>同样地，在 scripts/config 下新建文件 webpack.prod.js 作为生产环境配置，并输入以下代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">const { merge } = require(&#x27;webpack-merge&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">const common = require(&#x27;./webpack.common.js&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-88-unknown-token="-2-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">module.exports = merge(common, {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  mode: &#x27;production&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-88-unknown-token="})-5-0">})</span></div></pre></div><p>对于mode我们可以使用环境变量去区分，就可以提取到common的配置中</p><h2 id="cross-env可跨平台设置和使用环境变量"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#cross-env可跨平台设置和使用环境变量"><span class="icon icon-link"></span></a>cross-env可跨平台设置和使用环境变量</h2><p>cross-env 可跨平台设置和使用环境变量，不同操作系统设置环境变量的方式不一定相同，比如 Mac 电脑上使用 export NODE_ENV=development ，而 Windows 电脑上使用的是 set NODE_ENV=development ，有了这个利器，我们无需在考虑操作系统带来的差异性。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">yarn add cross-env@7.0.3 -D</span></div></pre></div><p>然后在 package.json 中添加修改以下代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain" data-90-unknown-token="{-0-0">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  &quot;scripts&quot;: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;start&quot;: &quot;cross-env NODE_ENV=development webpack --config ./scripts/config/webpack.dev.js&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack --config ./scripts/config/webpack.prod.js&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  },</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-90-unknown-token="}-5-0">}</span></div></pre></div><p>修改 srcipt/constants.js 文件，增加一个公用布尔变量 isDev ：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f" data-91-js-token="const-0-0">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34" data-91-js-token="=-0-11">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-91-js-token="require-0-13">require</span><span class="token punctuation" style="color:#393A34" data-91-js-token="(-0-20">(</span><span class="token string" style="color:#e3116c" data-91-js-token="&#x27;path&#x27;-0-21">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34" data-91-js-token=")-0-27">)</span><span class="token punctuation" style="color:#393A34" data-91-js-token=";-0-28">;</span><span class="token plain" data-91-js-token="-0-29"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-91-js-token="-1-0"></span><span class="token keyword" style="color:#00009f" data-91-js-token="const-1-0">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-91-js-token="PROJECT_PATH-1-6">PROJECT_PATH</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-91-js-token="=-1-19">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34" data-91-js-token=".-1-25">.</span><span class="token method function property-access" style="color:#d73a49" data-91-js-token="resolve-1-26">resolve</span><span class="token punctuation" style="color:#393A34" data-91-js-token="(-1-33">(</span><span class="token plain" data-91-js-token="__dirname-1-34">__dirname</span><span class="token punctuation" style="color:#393A34" data-91-js-token=",-1-43">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-91-js-token="&#x27;../&#x27;-1-45">&#x27;../&#x27;</span><span class="token punctuation" style="color:#393A34" data-91-js-token=")-1-50">)</span><span class="token punctuation" style="color:#393A34" data-91-js-token=";-1-51">;</span><span class="token plain" data-91-js-token="-1-52"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-91-js-token="-2-0"></span><span class="token keyword" style="color:#00009f" data-91-js-token="const-2-0">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-91-js-token="PROJECT_NAME-2-6">PROJECT_NAME</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-91-js-token="=-2-19">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34" data-91-js-token=".-2-25">.</span><span class="token method function property-access" style="color:#d73a49" data-91-js-token="parse-2-26">parse</span><span class="token punctuation" style="color:#393A34" data-91-js-token="(-2-31">(</span><span class="token constant" style="color:#36acaa" data-91-js-token="PROJECT_PATH-2-32">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-91-js-token=")-2-44">)</span><span class="token punctuation" style="color:#393A34" data-91-js-token=".-2-45">.</span><span class="token property-access" data-91-js-token="name-2-46">name</span><span class="token punctuation" style="color:#393A34" data-91-js-token=";-2-50">;</span><span class="token plain" data-91-js-token="-2-51"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-91-js-token="-3-0"></span><span class="token keyword" style="color:#00009f" data-91-js-token="const-3-0">const</span><span class="token plain"> isDev </span><span class="token operator" style="color:#393A34" data-91-js-token="=-3-12">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34" data-91-js-token=".-3-21">.</span><span class="token property-access" data-91-js-token="env-3-22">env</span><span class="token punctuation" style="color:#393A34" data-91-js-token=".-3-25">.</span><span class="token constant" style="color:#36acaa" data-91-js-token="NODE_ENV-3-26">NODE_ENV</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-91-js-token="!==-3-35">!==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-91-js-token="&#x27;production&#x27;-3-39">&#x27;production&#x27;</span><span class="token punctuation" style="color:#393A34" data-91-js-token=";-3-51">;</span><span class="token plain" data-91-js-token="-3-52"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-91-js-token="-4-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-91-js-token="module-5-0">module</span><span class="token punctuation" style="color:#393A34" data-91-js-token=".-5-6">.</span><span class="token property-access" data-91-js-token="exports-5-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-91-js-token="=-5-15">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-91-js-token="{-5-17">{</span><span class="token plain" data-91-js-token="-5-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-91-js-token="-6-0">	</span><span class="token constant" style="color:#36acaa" data-91-js-token="PROJECT_PATH-6-1">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-91-js-token=",-6-13">,</span><span class="token plain" data-91-js-token="-6-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-91-js-token="-7-0">	</span><span class="token constant" style="color:#36acaa" data-91-js-token="PROJECT_NAME-7-1">PROJECT_NAME</span><span class="token punctuation" style="color:#393A34" data-91-js-token=",-7-13">,</span><span class="token plain" data-91-js-token="-7-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-91-js-token="isDev-8-0">	isDev</span><span class="token punctuation" style="color:#393A34" data-91-js-token=",-8-6">,</span><span class="token plain" data-91-js-token="-8-7"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-91-js-token="-9-0"></span><span class="token punctuation" style="color:#393A34" data-91-js-token="}-9-0">}</span><span class="token punctuation" style="color:#393A34" data-91-js-token=";-9-1">;</span></div></pre></div><p>hash 值在开发环境中并不需要，于是我们修改 webpack.common.js 文件：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f" data-92-js-token="const-0-0">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-92-js-token="{-0-6">{</span><span class="token plain" data-92-js-token="resolve-0-7">resolve</span><span class="token punctuation" style="color:#393A34" data-92-js-token="}-0-14">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-92-js-token="=-0-16">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-92-js-token="require-0-18">require</span><span class="token punctuation" style="color:#393A34" data-92-js-token="(-0-25">(</span><span class="token string" style="color:#e3116c" data-92-js-token="&#x27;path&#x27;-0-26">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34" data-92-js-token=")-0-32">)</span><span class="token punctuation" style="color:#393A34" data-92-js-token=";-0-33">;</span><span class="token plain" data-92-js-token="-0-34"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-92-js-token="-1-0"></span><span class="token keyword" style="color:#00009f" data-92-js-token="const-1-0">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-92-js-token="{-1-6">{</span><span class="token constant" style="color:#36acaa" data-92-js-token="PROJECT_PATH-1-7">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-92-js-token=",-1-19">,</span><span class="token plain"> isDev</span><span class="token punctuation" style="color:#393A34" data-92-js-token="}-1-26">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-92-js-token="=-1-28">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-92-js-token="require-1-30">require</span><span class="token punctuation" style="color:#393A34" data-92-js-token="(-1-37">(</span><span class="token string" style="color:#e3116c" data-92-js-token="&#x27;../constants&#x27;-1-38">&#x27;../constants&#x27;</span><span class="token punctuation" style="color:#393A34" data-92-js-token=")-1-52">)</span><span class="token punctuation" style="color:#393A34" data-92-js-token=";-1-53">;</span><span class="token plain" data-92-js-token="-1-54"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-92-js-token="-2-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-92-js-token="module-3-0">module</span><span class="token punctuation" style="color:#393A34" data-92-js-token=".-3-6">.</span><span class="token property-access" data-92-js-token="exports-3-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-92-js-token="=-3-15">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-92-js-token="{-3-17">{</span><span class="token plain" data-92-js-token="-3-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-92-js-token="mode-4-0">	mode</span><span class="token operator" style="color:#393A34" data-92-js-token=":-4-5">:</span><span class="token plain"> isDev </span><span class="token operator" style="color:#393A34" data-92-js-token="?-4-13">?</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-92-js-token="&#x27;development&#x27;-4-15">&#x27;development&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-92-js-token=":-4-29">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-92-js-token="&#x27;production&#x27;-4-31">&#x27;production&#x27;</span><span class="token punctuation" style="color:#393A34" data-92-js-token=",-4-43">,</span><span class="token plain" data-92-js-token="-4-44"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-92-js-token="entry-5-0">	entry</span><span class="token operator" style="color:#393A34" data-92-js-token=":-5-6">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-92-js-token="{-5-8">{</span><span class="token plain" data-92-js-token="-5-9"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-92-js-token="app-6-0">		app</span><span class="token operator" style="color:#393A34" data-92-js-token=":-6-5">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-92-js-token="resolve-6-7">resolve</span><span class="token punctuation" style="color:#393A34" data-92-js-token="(-6-14">(</span><span class="token constant" style="color:#36acaa" data-92-js-token="PROJECT_PATH-6-15">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-92-js-token=",-6-27">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-92-js-token="&#x27;./src/app.js&#x27;-6-29">&#x27;./src/app.js&#x27;</span><span class="token punctuation" style="color:#393A34" data-92-js-token=")-6-43">)</span><span class="token punctuation" style="color:#393A34" data-92-js-token=",-6-44">,</span><span class="token plain" data-92-js-token="-6-45"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-92-js-token="-7-0">	</span><span class="token punctuation" style="color:#393A34" data-92-js-token="}-7-1">}</span><span class="token punctuation" style="color:#393A34" data-92-js-token=",-7-2">,</span><span class="token plain" data-92-js-token="-7-3"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-92-js-token="output-8-0">	output</span><span class="token operator" style="color:#393A34" data-92-js-token=":-8-7">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-92-js-token="{-8-9">{</span><span class="token plain" data-92-js-token="-8-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-92-js-token="filename-9-0">		filename</span><span class="token operator" style="color:#393A34" data-92-js-token=":-9-10">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c" data-92-js-token="`-9-12">`</span><span class="token template-string string" style="color:#e3116c" data-92-js-token="js/[name]-9-13">js/[name]</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34" data-92-js-token="${-9-22">${</span><span class="token template-string interpolation">isDev </span><span class="token template-string interpolation operator" style="color:#393A34" data-92-js-token="?-9-30">?</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:#e3116c" data-92-js-token="&#x27;&#x27;-9-32">&#x27;&#x27;</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation operator" style="color:#393A34" data-92-js-token=":-9-35">:</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:#e3116c" data-92-js-token="&#x27;.[hash:8]&#x27;-9-37">&#x27;.[hash:8]&#x27;</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34" data-92-js-token="}-9-48">}</span><span class="token template-string string" style="color:#e3116c" data-92-js-token=".js-9-49">.js</span><span class="token template-string template-punctuation string" style="color:#e3116c" data-92-js-token="`-9-52">`</span><span class="token punctuation" style="color:#393A34" data-92-js-token=",-9-53">,</span><span class="token plain" data-92-js-token="-9-54"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-92-js-token="path-10-0">		path</span><span class="token operator" style="color:#393A34" data-92-js-token=":-10-6">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-92-js-token="resolve-10-8">resolve</span><span class="token punctuation" style="color:#393A34" data-92-js-token="(-10-15">(</span><span class="token constant" style="color:#36acaa" data-92-js-token="PROJECT_PATH-10-16">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-92-js-token=",-10-28">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-92-js-token="&#x27;./dist&#x27;-10-30">&#x27;./dist&#x27;</span><span class="token punctuation" style="color:#393A34" data-92-js-token=")-10-38">)</span><span class="token punctuation" style="color:#393A34" data-92-js-token=",-10-39">,</span><span class="token plain" data-92-js-token="-10-40"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-92-js-token="-11-0">	</span><span class="token punctuation" style="color:#393A34" data-92-js-token="}-11-1">}</span><span class="token punctuation" style="color:#393A34" data-92-js-token=",-11-2">,</span><span class="token plain" data-92-js-token="-11-3"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-92-js-token="-12-0"></span><span class="token punctuation" style="color:#393A34" data-92-js-token="}-12-0">}</span><span class="token punctuation" style="color:#393A34" data-92-js-token=";-12-1">;</span></div></pre></div><h2 id="本地服务实时查看页面"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#本地服务实时查看页面"><span class="icon icon-link"></span></a>本地服务实时查看页面</h2><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">yarn add webpack-dev-server@5.0.3 html-webpack-plugin@5.6.0 -D</span></div></pre></div><p>简单介绍一下两个工具的作用：</p><ul><li>html-webpack-plugin ：每一个页面是一定要有 html 文件的，而这个插件能帮助我们将打包后的 js 文件自动引进 html 文件中，毕竟你不可能每次更改代码后都手动去引入 js 文件。</li><li>webpack-dev-server ：可以在本地起一个 http 服务，通过简单的配置还可指定其端口、热更新的开启等。</li></ul><p>现在，我们先在项目根目录下新建一个 public 文件夹，里面存放一些公用的静态资源，现在我们先在其中新建一个 index.html ，写入以下内容：</p><div class="__dumi-default-code-block"><pre class="prism-code language-html" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic" data-94-html-token="&lt;!-0-0">&lt;!</span><span class="token doctype name" style="color:#999988;font-style:italic" data-94-html-token="doctype-0-2">doctype</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic" data-94-html-token="html-0-10">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic" data-94-html-token="&gt;-0-14">&gt;</span><span class="token plain" data-94-html-token="-0-15"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-94-html-token="-1-0"></span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&lt;-1-0">&lt;</span><span class="token tag" style="color:#00009f" data-94-html-token="html-1-1">html</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db" data-94-html-token="lang-1-6">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-94-html-token="=-1-10">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-94-html-token="&quot;-1-11">&quot;</span><span class="token tag attr-value" style="color:#e3116c" data-94-html-token="en-1-12">en</span><span class="token tag attr-value punctuation" style="color:#393A34" data-94-html-token="&quot;-1-14">&quot;</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&gt;-1-15">&gt;</span><span class="token plain" data-94-html-token="-1-16"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-94-html-token="-2-0">	</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&lt;-2-1">&lt;</span><span class="token tag" style="color:#00009f" data-94-html-token="head-2-2">head</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&gt;-2-6">&gt;</span><span class="token plain" data-94-html-token="-2-7"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-94-html-token="-3-0">		</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&lt;-3-2">&lt;</span><span class="token tag" style="color:#00009f" data-94-html-token="meta-3-3">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db" data-94-html-token="charset-3-8">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-94-html-token="=-3-15">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-94-html-token="&quot;-3-16">&quot;</span><span class="token tag attr-value" style="color:#e3116c" data-94-html-token="UTF-8-3-17">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34" data-94-html-token="&quot;-3-22">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="/&gt;-3-24">/&gt;</span><span class="token plain" data-94-html-token="-3-26"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-94-html-token="-4-0">		</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&lt;-4-2">&lt;</span><span class="token tag" style="color:#00009f" data-94-html-token="meta-4-3">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db" data-94-html-token="name-4-8">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-94-html-token="=-4-12">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-94-html-token="&quot;-4-13">&quot;</span><span class="token tag attr-value" style="color:#e3116c" data-94-html-token="viewport-4-14">viewport</span><span class="token tag attr-value punctuation" style="color:#393A34" data-94-html-token="&quot;-4-22">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db" data-94-html-token="content-4-24">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-94-html-token="=-4-31">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-94-html-token="&quot;-4-32">&quot;</span><span class="token tag attr-value" style="color:#e3116c">width=device-width, initial-scale=1.0</span><span class="token tag attr-value punctuation" style="color:#393A34" data-94-html-token="&quot;-4-70">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="/&gt;-4-72">/&gt;</span><span class="token plain" data-94-html-token="-4-74"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-94-html-token="-5-0">		</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&lt;-5-2">&lt;</span><span class="token tag" style="color:#00009f" data-94-html-token="title-5-3">title</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&gt;-5-8">&gt;</span><span class="token plain">React18 + Ts5 + webpack5 开发模板搭建</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&lt;/-5-40">&lt;/</span><span class="token tag" style="color:#00009f" data-94-html-token="title-5-42">title</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&gt;-5-47">&gt;</span><span class="token plain" data-94-html-token="-5-48"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-94-html-token="-6-0">	</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&lt;/-6-1">&lt;/</span><span class="token tag" style="color:#00009f" data-94-html-token="head-6-3">head</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&gt;-6-7">&gt;</span><span class="token plain" data-94-html-token="-6-8"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-94-html-token="-7-0">	</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&lt;-7-1">&lt;</span><span class="token tag" style="color:#00009f" data-94-html-token="body-7-2">body</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&gt;-7-6">&gt;</span><span class="token plain" data-94-html-token="-7-7"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-94-html-token="-8-0">		</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&lt;-8-2">&lt;</span><span class="token tag" style="color:#00009f" data-94-html-token="div-8-3">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db" data-94-html-token="id-8-7">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34" data-94-html-token="=-8-9">=</span><span class="token tag attr-value punctuation" style="color:#393A34" data-94-html-token="&quot;-8-10">&quot;</span><span class="token tag attr-value" style="color:#e3116c" data-94-html-token="root-8-11">root</span><span class="token tag attr-value punctuation" style="color:#393A34" data-94-html-token="&quot;-8-15">&quot;</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&gt;-8-16">&gt;</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&lt;/-8-17">&lt;/</span><span class="token tag" style="color:#00009f" data-94-html-token="div-8-19">div</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&gt;-8-22">&gt;</span><span class="token plain" data-94-html-token="-8-23"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-94-html-token="-9-0">	</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&lt;/-9-1">&lt;/</span><span class="token tag" style="color:#00009f" data-94-html-token="body-9-3">body</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&gt;-9-7">&gt;</span><span class="token plain" data-94-html-token="-9-8"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-94-html-token="-10-0"></span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&lt;/-10-0">&lt;/</span><span class="token tag" style="color:#00009f" data-94-html-token="html-10-2">html</span><span class="token tag punctuation" style="color:#393A34" data-94-html-token="&gt;-10-6">&gt;</span></div></pre></div><p>因为 html-webpack-plugin 在开发和生产环境我们都需要配置，于是我们打开 webpck.common.js 增加以下内容：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f" data-95-js-token="const-0-0">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-95-js-token="{-0-6">{</span><span class="token plain" data-95-js-token="resolve-0-7">resolve</span><span class="token punctuation" style="color:#393A34" data-95-js-token="}-0-14">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-95-js-token="=-0-16">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-95-js-token="require-0-18">require</span><span class="token punctuation" style="color:#393A34" data-95-js-token="(-0-25">(</span><span class="token string" style="color:#e3116c" data-95-js-token="&#x27;path&#x27;-0-26">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34" data-95-js-token=")-0-32">)</span><span class="token punctuation" style="color:#393A34" data-95-js-token=";-0-33">;</span><span class="token plain" data-95-js-token="-0-34"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="-1-0"></span><span class="token keyword" style="color:#00009f" data-95-js-token="const-1-0">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-95-js-token="{-1-6">{</span><span class="token constant" style="color:#36acaa" data-95-js-token="PROJECT_PATH-1-7">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-1-19">,</span><span class="token plain"> isDev</span><span class="token punctuation" style="color:#393A34" data-95-js-token="}-1-26">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-95-js-token="=-1-28">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-95-js-token="require-1-30">require</span><span class="token punctuation" style="color:#393A34" data-95-js-token="(-1-37">(</span><span class="token string" style="color:#e3116c" data-95-js-token="&#x27;../constants&#x27;-1-38">&#x27;../constants&#x27;</span><span class="token punctuation" style="color:#393A34" data-95-js-token=")-1-52">)</span><span class="token punctuation" style="color:#393A34" data-95-js-token=";-1-53">;</span><span class="token plain" data-95-js-token="-1-54"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="-2-0"></span><span class="token keyword" style="color:#00009f" data-95-js-token="const-2-0">const</span><span class="token plain"> </span><span class="token maybe-class-name" data-95-js-token="HtmlWebpackPlugin-2-6">HtmlWebpackPlugin</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-95-js-token="=-2-24">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-95-js-token="require-2-26">require</span><span class="token punctuation" style="color:#393A34" data-95-js-token="(-2-33">(</span><span class="token string" style="color:#e3116c" data-95-js-token="&#x27;html-webpack-plugin&#x27;-2-34">&#x27;html-webpack-plugin&#x27;</span><span class="token punctuation" style="color:#393A34" data-95-js-token=")-2-55">)</span><span class="token punctuation" style="color:#393A34" data-95-js-token=";-2-56">;</span><span class="token plain" data-95-js-token="-2-57"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-95-js-token="-3-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="-4-0"></span><span class="token keyword" style="color:#00009f" data-95-js-token="const-4-0">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-95-js-token="PLUGINS-4-6">PLUGINS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-95-js-token="=-4-14">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-95-js-token="[-4-16">[</span><span class="token plain" data-95-js-token="-4-17"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="-5-0">	</span><span class="token comment" style="color:#999988;font-style:italic">// 配置html，自动引入打包出的js文件</span><span class="token plain" data-95-js-token="-5-23"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="-6-0">	</span><span class="token keyword" style="color:#00009f" data-95-js-token="new-6-1">new</span><span class="token plain"> </span><span class="token class-name" data-95-js-token="HtmlWebpackPlugin-6-5">HtmlWebpackPlugin</span><span class="token punctuation" style="color:#393A34" data-95-js-token="(-6-22">(</span><span class="token punctuation" style="color:#393A34" data-95-js-token="{-6-23">{</span><span class="token plain" data-95-js-token="-6-24"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="template-7-0">		template</span><span class="token operator" style="color:#393A34" data-95-js-token=":-7-10">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-95-js-token="resolve-7-12">resolve</span><span class="token punctuation" style="color:#393A34" data-95-js-token="(-7-19">(</span><span class="token constant" style="color:#36acaa" data-95-js-token="PROJECT_PATH-7-20">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-7-32">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-95-js-token="&#x27;./public/index.html&#x27;-7-34">&#x27;./public/index.html&#x27;</span><span class="token punctuation" style="color:#393A34" data-95-js-token=")-7-55">)</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-7-56">,</span><span class="token plain" data-95-js-token="-7-57"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="filename-8-0">		filename</span><span class="token operator" style="color:#393A34" data-95-js-token=":-8-10">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-95-js-token="&#x27;index.html&#x27;-8-12">&#x27;index.html&#x27;</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-8-24">,</span><span class="token plain" data-95-js-token="-8-25"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="cache-9-0">		cache</span><span class="token operator" style="color:#393A34" data-95-js-token=":-9-7">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="false-9-9">false</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-9-14">,</span><span class="token plain" data-95-js-token="-9-15"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="minify-10-0">		minify</span><span class="token operator" style="color:#393A34" data-95-js-token=":-10-8">:</span><span class="token plain"> isDev</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="-11-0">			</span><span class="token operator" style="color:#393A34" data-95-js-token="?-11-3">?</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="false-11-5">false</span><span class="token plain" data-95-js-token="-11-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="-12-0">			</span><span class="token operator" style="color:#393A34" data-95-js-token=":-12-3">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-95-js-token="{-12-5">{</span><span class="token plain" data-95-js-token="-12-6"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="removeAttributeQuotes-13-0">					removeAttributeQuotes</span><span class="token operator" style="color:#393A34" data-95-js-token=":-13-26">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="true-13-28">true</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-13-32">,</span><span class="token plain" data-95-js-token="-13-33"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="collapseWhitespace-14-0">					collapseWhitespace</span><span class="token operator" style="color:#393A34" data-95-js-token=":-14-23">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="true-14-25">true</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-14-29">,</span><span class="token plain" data-95-js-token="-14-30"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="removeComments-15-0">					removeComments</span><span class="token operator" style="color:#393A34" data-95-js-token=":-15-19">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="true-15-21">true</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-15-25">,</span><span class="token plain" data-95-js-token="-15-26"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="collapseBooleanAttributes-16-0">					collapseBooleanAttributes</span><span class="token operator" style="color:#393A34" data-95-js-token=":-16-30">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="true-16-32">true</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-16-36">,</span><span class="token plain" data-95-js-token="-16-37"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="collapseInlineTagWhitespace-17-0">					collapseInlineTagWhitespace</span><span class="token operator" style="color:#393A34" data-95-js-token=":-17-32">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="true-17-34">true</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-17-38">,</span><span class="token plain" data-95-js-token="-17-39"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="removeRedundantAttributes-18-0">					removeRedundantAttributes</span><span class="token operator" style="color:#393A34" data-95-js-token=":-18-30">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="true-18-32">true</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-18-36">,</span><span class="token plain" data-95-js-token="-18-37"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="removeScriptTypeAttributes-19-0">					removeScriptTypeAttributes</span><span class="token operator" style="color:#393A34" data-95-js-token=":-19-31">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="true-19-33">true</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-19-37">,</span><span class="token plain" data-95-js-token="-19-38"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="removeStyleLinkTypeAttributes-20-0">					removeStyleLinkTypeAttributes</span><span class="token operator" style="color:#393A34" data-95-js-token=":-20-34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="true-20-36">true</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-20-40">,</span><span class="token plain" data-95-js-token="-20-41"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="minifyCSS-21-0">					minifyCSS</span><span class="token operator" style="color:#393A34" data-95-js-token=":-21-14">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="true-21-16">true</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-21-20">,</span><span class="token plain" data-95-js-token="-21-21"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="minifyJS-22-0">					minifyJS</span><span class="token operator" style="color:#393A34" data-95-js-token=":-22-13">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="true-22-15">true</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-22-19">,</span><span class="token plain" data-95-js-token="-22-20"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="minifyURLs-23-0">					minifyURLs</span><span class="token operator" style="color:#393A34" data-95-js-token=":-23-15">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="true-23-17">true</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-23-21">,</span><span class="token plain" data-95-js-token="-23-22"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="useShortDoctype-24-0">					useShortDoctype</span><span class="token operator" style="color:#393A34" data-95-js-token=":-24-20">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-95-js-token="true-24-22">true</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-24-26">,</span><span class="token plain" data-95-js-token="-24-27"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="-25-0">				</span><span class="token punctuation" style="color:#393A34" data-95-js-token="}-25-4">}</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-25-5">,</span><span class="token plain" data-95-js-token="-25-6"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="-26-0">	</span><span class="token punctuation" style="color:#393A34" data-95-js-token="}-26-1">}</span><span class="token punctuation" style="color:#393A34" data-95-js-token=")-26-2">)</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-26-3">,</span><span class="token plain" data-95-js-token="-26-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="-27-0"></span><span class="token punctuation" style="color:#393A34" data-95-js-token="]-27-0">]</span><span class="token punctuation" style="color:#393A34" data-95-js-token=";-27-1">;</span><span class="token plain" data-95-js-token="-27-2"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-95-js-token="-28-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="module-29-0">module</span><span class="token punctuation" style="color:#393A34" data-95-js-token=".-29-6">.</span><span class="token property-access" data-95-js-token="exports-29-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-95-js-token="=-29-15">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-95-js-token="{-29-17">{</span><span class="token plain" data-95-js-token="-29-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="mode-30-0">	mode</span><span class="token operator" style="color:#393A34" data-95-js-token=":-30-5">:</span><span class="token plain"> isDev </span><span class="token operator" style="color:#393A34" data-95-js-token="?-30-13">?</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-95-js-token="&#x27;development&#x27;-30-15">&#x27;development&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-95-js-token=":-30-29">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-95-js-token="&#x27;production&#x27;-30-31">&#x27;production&#x27;</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-30-43">,</span><span class="token plain" data-95-js-token="-30-44"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="entry-31-0">	entry</span><span class="token operator" style="color:#393A34" data-95-js-token=":-31-6">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-95-js-token="{-31-8">{</span><span class="token plain" data-95-js-token="-31-9"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="app-32-0">		app</span><span class="token operator" style="color:#393A34" data-95-js-token=":-32-5">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-95-js-token="resolve-32-7">resolve</span><span class="token punctuation" style="color:#393A34" data-95-js-token="(-32-14">(</span><span class="token constant" style="color:#36acaa" data-95-js-token="PROJECT_PATH-32-15">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-32-27">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-95-js-token="&#x27;./src/app.js&#x27;-32-29">&#x27;./src/app.js&#x27;</span><span class="token punctuation" style="color:#393A34" data-95-js-token=")-32-43">)</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-32-44">,</span><span class="token plain" data-95-js-token="-32-45"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="-33-0">	</span><span class="token punctuation" style="color:#393A34" data-95-js-token="}-33-1">}</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-33-2">,</span><span class="token plain" data-95-js-token="-33-3"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="output-34-0">	output</span><span class="token operator" style="color:#393A34" data-95-js-token=":-34-7">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-95-js-token="{-34-9">{</span><span class="token plain" data-95-js-token="-34-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="filename-35-0">		filename</span><span class="token operator" style="color:#393A34" data-95-js-token=":-35-10">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c" data-95-js-token="`-35-12">`</span><span class="token template-string string" style="color:#e3116c" data-95-js-token="js/[name]-35-13">js/[name]</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34" data-95-js-token="${-35-22">${</span><span class="token template-string interpolation">isDev </span><span class="token template-string interpolation operator" style="color:#393A34" data-95-js-token="?-35-30">?</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:#e3116c" data-95-js-token="&#x27;&#x27;-35-32">&#x27;&#x27;</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation operator" style="color:#393A34" data-95-js-token=":-35-35">:</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:#e3116c" data-95-js-token="&#x27;.[hash:8]&#x27;-35-37">&#x27;.[hash:8]&#x27;</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34" data-95-js-token="}-35-48">}</span><span class="token template-string string" style="color:#e3116c" data-95-js-token=".js-35-49">.js</span><span class="token template-string template-punctuation string" style="color:#e3116c" data-95-js-token="`-35-52">`</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-35-53">,</span><span class="token plain" data-95-js-token="-35-54"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="path-36-0">		path</span><span class="token operator" style="color:#393A34" data-95-js-token=":-36-6">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-95-js-token="resolve-36-8">resolve</span><span class="token punctuation" style="color:#393A34" data-95-js-token="(-36-15">(</span><span class="token constant" style="color:#36acaa" data-95-js-token="PROJECT_PATH-36-16">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-36-28">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-95-js-token="&#x27;./dist&#x27;-36-30">&#x27;./dist&#x27;</span><span class="token punctuation" style="color:#393A34" data-95-js-token=")-36-38">)</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-36-39">,</span><span class="token plain" data-95-js-token="-36-40"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="-37-0">	</span><span class="token punctuation" style="color:#393A34" data-95-js-token="}-37-1">}</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-37-2">,</span><span class="token plain" data-95-js-token="-37-3"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="plugins-38-0">	plugins</span><span class="token operator" style="color:#393A34" data-95-js-token=":-38-8">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-95-js-token="PLUGINS-38-10">PLUGINS</span><span class="token punctuation" style="color:#393A34" data-95-js-token=",-38-17">,</span><span class="token plain" data-95-js-token="-38-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-95-js-token="-39-0"></span><span class="token punctuation" style="color:#393A34" data-95-js-token="}-39-0">}</span><span class="token punctuation" style="color:#393A34" data-95-js-token=";-39-1">;</span></div></pre></div><p>随后在 webpack.dev.js 下增加本地服务的配置：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f" data-96-js-token="const-0-0">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-96-js-token="{-0-6">{</span><span class="token plain"> merge </span><span class="token punctuation" style="color:#393A34" data-96-js-token="}-0-14">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-96-js-token="=-0-16">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-96-js-token="require-0-18">require</span><span class="token punctuation" style="color:#393A34" data-96-js-token="(-0-25">(</span><span class="token string" style="color:#e3116c" data-96-js-token="&quot;webpack-merge&quot;-0-26">&quot;webpack-merge&quot;</span><span class="token punctuation" style="color:#393A34" data-96-js-token=")-0-41">)</span><span class="token punctuation" style="color:#393A34" data-96-js-token=";-0-42">;</span><span class="token plain" data-96-js-token="-0-43"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-96-js-token="-1-0"></span><span class="token keyword" style="color:#00009f" data-96-js-token="const-1-0">const</span><span class="token plain"> common </span><span class="token operator" style="color:#393A34" data-96-js-token="=-1-13">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-96-js-token="require-1-15">require</span><span class="token punctuation" style="color:#393A34" data-96-js-token="(-1-22">(</span><span class="token string" style="color:#e3116c" data-96-js-token="&quot;./webpack.common.js&quot;-1-23">&quot;./webpack.common.js&quot;</span><span class="token punctuation" style="color:#393A34" data-96-js-token=")-1-44">)</span><span class="token punctuation" style="color:#393A34" data-96-js-token=";-1-45">;</span><span class="token plain" data-96-js-token="-1-46"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-96-js-token="-2-0"></span><span class="token keyword" style="color:#00009f" data-96-js-token="const-2-0">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-96-js-token="{-2-6">{</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-96-js-token="SERVER_HOST-2-8">SERVER_HOST</span><span class="token punctuation" style="color:#393A34" data-96-js-token=",-2-19">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-96-js-token="SERVER_PORT-2-21">SERVER_PORT</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-96-js-token="}-2-33">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-96-js-token="=-2-35">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-96-js-token="require-2-37">require</span><span class="token punctuation" style="color:#393A34" data-96-js-token="(-2-44">(</span><span class="token string" style="color:#e3116c" data-96-js-token="&quot;../constants&quot;-2-45">&quot;../constants&quot;</span><span class="token punctuation" style="color:#393A34" data-96-js-token=")-2-59">)</span><span class="token punctuation" style="color:#393A34" data-96-js-token=";-2-60">;</span><span class="token plain" data-96-js-token="-2-61"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-96-js-token="module-3-0">module</span><span class="token punctuation" style="color:#393A34" data-96-js-token=".-3-6">.</span><span class="token property-access" data-96-js-token="exports-3-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-96-js-token="=-3-15">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-96-js-token="merge-3-17">merge</span><span class="token punctuation" style="color:#393A34" data-96-js-token="(-3-22">(</span><span class="token plain" data-96-js-token="common-3-23">common</span><span class="token punctuation" style="color:#393A34" data-96-js-token=",-3-29">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-96-js-token="{-3-31">{</span><span class="token plain" data-96-js-token="-3-32"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  mode</span><span class="token operator" style="color:#393A34" data-96-js-token=":-4-6">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-96-js-token="&quot;development&quot;-4-8">&quot;development&quot;</span><span class="token punctuation" style="color:#393A34" data-96-js-token=",-4-21">,</span><span class="token plain" data-96-js-token="-4-22"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  stats</span><span class="token operator" style="color:#393A34" data-96-js-token=":-5-7">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-96-js-token="&quot;errors-only&quot;-5-9">&quot;errors-only&quot;</span><span class="token punctuation" style="color:#393A34" data-96-js-token=",-5-22">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 终端仅打印 error</span><span class="token plain" data-96-js-token="-5-38"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  devtool</span><span class="token operator" style="color:#393A34" data-96-js-token=":-6-9">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-96-js-token="&quot;eval-source-map&quot;-6-11">&quot;eval-source-map&quot;</span><span class="token punctuation" style="color:#393A34" data-96-js-token=",-6-28">,</span><span class="token plain" data-96-js-token="-6-29"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  devServer</span><span class="token operator" style="color:#393A34" data-96-js-token=":-7-11">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-96-js-token="{-7-13">{</span><span class="token plain" data-96-js-token="-7-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    host</span><span class="token operator" style="color:#393A34" data-96-js-token=":-8-8">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-96-js-token="SERVER_HOST-8-10">SERVER_HOST</span><span class="token punctuation" style="color:#393A34" data-96-js-token=",-8-21">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 指定 host，不设置的话默认是 localhost</span><span class="token plain" data-96-js-token="-8-52"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    port</span><span class="token operator" style="color:#393A34" data-96-js-token=":-9-8">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-96-js-token="SERVER_PORT-9-10">SERVER_PORT</span><span class="token punctuation" style="color:#393A34" data-96-js-token=",-9-21">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 指定端口，默认是8080</span><span class="token plain" data-96-js-token="-9-38"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    client</span><span class="token operator" style="color:#393A34" data-96-js-token=":-10-10">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-96-js-token="{-10-12">{</span><span class="token plain" data-96-js-token="-10-13"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 控制日志输出格式</span><span class="token plain" data-96-js-token="-11-17"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      logging</span><span class="token operator" style="color:#393A34" data-96-js-token=":-12-13">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-96-js-token="&quot;info&quot;-12-15">&quot;info&quot;</span><span class="token punctuation" style="color:#393A34" data-96-js-token=",-12-21">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 选择 &#x27;none&#x27;, &#x27;error&#x27;, &#x27;warn&#x27;, &#x27;info&#x27;, &#x27;log&#x27;, 或 &#x27;verbose&#x27;</span><span class="token plain" data-96-js-token="-12-80"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34" data-96-js-token="}-13-4">}</span><span class="token punctuation" style="color:#393A34" data-96-js-token=",-13-5">,</span><span class="token plain" data-96-js-token="-13-6"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    compress</span><span class="token operator" style="color:#393A34" data-96-js-token=":-14-12">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-96-js-token="true-14-14">true</span><span class="token punctuation" style="color:#393A34" data-96-js-token=",-14-18">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 是否启用 gzip 压缩</span><span class="token plain" data-96-js-token="-14-35"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    open</span><span class="token operator" style="color:#393A34" data-96-js-token=":-15-8">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-96-js-token="true-15-10">true</span><span class="token punctuation" style="color:#393A34" data-96-js-token=",-15-14">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 打开默认浏览器</span><span class="token plain" data-96-js-token="-15-26"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    hot</span><span class="token operator" style="color:#393A34" data-96-js-token=":-16-7">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-96-js-token="true-16-9">true</span><span class="token punctuation" style="color:#393A34" data-96-js-token=",-16-13">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 热更新</span><span class="token plain" data-96-js-token="-16-21"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34" data-96-js-token="}-17-2">}</span><span class="token punctuation" style="color:#393A34" data-96-js-token=",-17-3">,</span><span class="token plain" data-96-js-token="-17-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-96-js-token="-18-0"></span><span class="token punctuation" style="color:#393A34" data-96-js-token="}-18-0">}</span><span class="token punctuation" style="color:#393A34" data-96-js-token=")-18-1">)</span><span class="token punctuation" style="color:#393A34" data-96-js-token=";-18-2">;</span></div></pre></div><p>我们定义了两个新的变量 SERVER_HOST 和 SERVER_PORT ，在 constants.js 中定义它们：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f" data-97-js-token="const-0-0">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34" data-97-js-token="=-0-11">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-97-js-token="require-0-13">require</span><span class="token punctuation" style="color:#393A34" data-97-js-token="(-0-20">(</span><span class="token string" style="color:#e3116c" data-97-js-token="&#x27;path&#x27;-0-21">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34" data-97-js-token=")-0-27">)</span><span class="token punctuation" style="color:#393A34" data-97-js-token=";-0-28">;</span><span class="token plain" data-97-js-token="-0-29"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-97-js-token="-1-0"></span><span class="token keyword" style="color:#00009f" data-97-js-token="const-1-0">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-97-js-token="PROJECT_PATH-1-6">PROJECT_PATH</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-97-js-token="=-1-19">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34" data-97-js-token=".-1-25">.</span><span class="token method function property-access" style="color:#d73a49" data-97-js-token="resolve-1-26">resolve</span><span class="token punctuation" style="color:#393A34" data-97-js-token="(-1-33">(</span><span class="token plain" data-97-js-token="__dirname-1-34">__dirname</span><span class="token punctuation" style="color:#393A34" data-97-js-token=",-1-43">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-97-js-token="&#x27;../&#x27;-1-45">&#x27;../&#x27;</span><span class="token punctuation" style="color:#393A34" data-97-js-token=")-1-50">)</span><span class="token punctuation" style="color:#393A34" data-97-js-token=";-1-51">;</span><span class="token plain" data-97-js-token="-1-52"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-97-js-token="-2-0"></span><span class="token keyword" style="color:#00009f" data-97-js-token="const-2-0">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-97-js-token="PROJECT_NAME-2-6">PROJECT_NAME</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-97-js-token="=-2-19">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34" data-97-js-token=".-2-25">.</span><span class="token method function property-access" style="color:#d73a49" data-97-js-token="parse-2-26">parse</span><span class="token punctuation" style="color:#393A34" data-97-js-token="(-2-31">(</span><span class="token constant" style="color:#36acaa" data-97-js-token="PROJECT_PATH-2-32">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-97-js-token=")-2-44">)</span><span class="token punctuation" style="color:#393A34" data-97-js-token=".-2-45">.</span><span class="token property-access" data-97-js-token="name-2-46">name</span><span class="token punctuation" style="color:#393A34" data-97-js-token=";-2-50">;</span><span class="token plain" data-97-js-token="-2-51"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-97-js-token="-3-0"></span><span class="token keyword" style="color:#00009f" data-97-js-token="const-3-0">const</span><span class="token plain"> isDev </span><span class="token operator" style="color:#393A34" data-97-js-token="=-3-12">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34" data-97-js-token=".-3-21">.</span><span class="token property-access" data-97-js-token="env-3-22">env</span><span class="token punctuation" style="color:#393A34" data-97-js-token=".-3-25">.</span><span class="token constant" style="color:#36acaa" data-97-js-token="NODE_ENV-3-26">NODE_ENV</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-97-js-token="!==-3-35">!==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-97-js-token="&#x27;production&#x27;-3-39">&#x27;production&#x27;</span><span class="token punctuation" style="color:#393A34" data-97-js-token=";-3-51">;</span><span class="token plain" data-97-js-token="-3-52"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-97-js-token="-4-0"></span><span class="token keyword" style="color:#00009f" data-97-js-token="const-4-0">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-97-js-token="SERVER_HOST-4-6">SERVER_HOST</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-97-js-token="=-4-18">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-97-js-token="&#x27;127.0.0.1&#x27;-4-20">&#x27;127.0.0.1&#x27;</span><span class="token punctuation" style="color:#393A34" data-97-js-token=";-4-31">;</span><span class="token plain" data-97-js-token="-4-32"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-97-js-token="-5-0"></span><span class="token keyword" style="color:#00009f" data-97-js-token="const-5-0">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-97-js-token="SERVER_PORT-5-6">SERVER_PORT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-97-js-token="=-5-18">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa" data-97-js-token="9000-5-20">9000</span><span class="token punctuation" style="color:#393A34" data-97-js-token=";-5-24">;</span><span class="token plain" data-97-js-token="-5-25"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-97-js-token="module-6-0">module</span><span class="token punctuation" style="color:#393A34" data-97-js-token=".-6-6">.</span><span class="token property-access" data-97-js-token="exports-6-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-97-js-token="=-6-15">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-97-js-token="{-6-17">{</span><span class="token plain" data-97-js-token="-6-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-97-js-token="-7-0">	</span><span class="token constant" style="color:#36acaa" data-97-js-token="SERVER_HOST-7-1">SERVER_HOST</span><span class="token punctuation" style="color:#393A34" data-97-js-token=",-7-12">,</span><span class="token plain" data-97-js-token="-7-13"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-97-js-token="-8-0">	</span><span class="token constant" style="color:#36acaa" data-97-js-token="SERVER_PORT-8-1">SERVER_PORT</span><span class="token punctuation" style="color:#393A34" data-97-js-token=",-8-12">,</span><span class="token plain" data-97-js-token="-8-13"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-97-js-token="-9-0">	</span><span class="token constant" style="color:#36acaa" data-97-js-token="PROJECT_PATH-9-1">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-97-js-token=",-9-13">,</span><span class="token plain" data-97-js-token="-9-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-97-js-token="-10-0">	</span><span class="token constant" style="color:#36acaa" data-97-js-token="PROJECT_NAME-10-1">PROJECT_NAME</span><span class="token punctuation" style="color:#393A34" data-97-js-token=",-10-13">,</span><span class="token plain" data-97-js-token="-10-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-97-js-token="isDev-11-0">	isDev</span><span class="token punctuation" style="color:#393A34" data-97-js-token=",-11-6">,</span><span class="token plain" data-97-js-token="-11-7"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-97-js-token="-12-0"></span><span class="token punctuation" style="color:#393A34" data-97-js-token="}-12-0">}</span><span class="token punctuation" style="color:#393A34" data-97-js-token=";-12-1">;</span></div></pre></div><p>现在配置好了本地服务的相关配置，我们还需要回到 package.json 中修改 start 命令：</p><div class="__dumi-default-code-block"><pre class="prism-code language-json" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34" data-98-json-token="{-0-0">{</span><span class="token plain" data-98-json-token="-0-1"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa" data-98-json-token="&quot;scripts&quot;-1-2">&quot;scripts&quot;</span><span class="token operator" style="color:#393A34" data-98-json-token=":-1-11">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-98-json-token="{-1-13">{</span><span class="token plain" data-98-json-token="-1-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa" data-98-json-token="&quot;start&quot;-2-4">&quot;start&quot;</span><span class="token operator" style="color:#393A34" data-98-json-token=":-2-11">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cross-env NODE_ENV=development webpack-dev-server --config ./scripts/config/webpack.dev.js&quot;</span><span class="token punctuation" style="color:#393A34" data-98-json-token=",-2-105">,</span><span class="token plain" data-98-json-token="-2-106"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34" data-98-json-token="}-3-2">}</span><span class="token punctuation" style="color:#393A34" data-98-json-token=",-3-3">,</span><span class="token plain" data-98-json-token="-3-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-98-json-token="-4-0"></span><span class="token punctuation" style="color:#393A34" data-98-json-token="}-4-0">}</span></div></pre></div><p>yarn run start测试一下，如下图</p><p><img src="/front_end_engineer_book/static/image-20240615121614095.3c00735c.png" alt="image-20240615121614095"/></p><h2 id="devtool--sourcemap"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#devtool--sourcemap"><span class="icon icon-link"></span></a>devtool &amp; sourcemap</h2><p>devtool 是一个在 Webpack 配置中用于控制是否生成，以及如何生成 Source Map 的配置选项。Source Map 是一种用于将编译、打包、转换后的代码映射回原始源代码的工具，它在调试中非常有用，因为它允许你看到源代码级别的错误和日志信息，即使你正在运行的是转换后的代码。 Source Map： Source Map 基本上是一个文件，它提供了从原始源代码到压缩、转换代码之间的映射。这样，当你在浏览器中调试时，即便是在查看转换后的代码（例如，压缩过后的或者由 TypeScript 转换成 JavaScript 的代码），调试器也能够展示出原始源码的位置，从而使得调试过程更加直观和容易。</p><p>在 Webpack 中，有多种方式可以生成 Source Map，devtool 配置项可以接受以下值之一：</p><ul><li>eval：每个模块会用 eval() 执行，并且在末尾追加一个 //@ sourceMappingURL 注释，最快。</li><li>cheap-eval-source-map：生成较快，并且可以映射到行号。</li><li>cheap-module-eval-source-map：生成较快，并且会生成 Source Map 到模块级别。</li><li>eval-source-map：转换(transpile)每个模块，并在一个 DataUrl 中提供 Source Map，提供质量更好但速度较慢的 Source Map。</li><li>cheap-source-map：不包含列信息的 Source Map，不包括 loader 的 Source Map。</li><li>cheap-module-source-map：不包含列信息，但是加载器(loader)的 Source Map 会被简化为每行一个映射(mapping)。</li><li>inline-source-map：生成一个完整的 Source Map，并以 DataUrl 的形式追加到输出文件末尾。</li><li>source-map：生成一个独立的 Source Map 文件，提供完整的映射信息，通常用于生产环境中。</li><li>hidden-source-map：创建 Source Map，但不在打包文件中引用，错误信息不会显示原始代码的位置信息，只会显示构建后代码的位置信息。</li><li>nosources-source-map：创建 Source Map，但不包含 sourcesContent（原始代码内容）。 这些选项提供了不同层次的 Source Map 质量和构建性能之间的权衡。例如，在开发环境中，你可能会选择一个构建速度快的 Source Map 选项，比如 eval-source-map，以提高构建和重构建的速度。在生产环境中，为了获取好的源映射，通常会采用 source-map 或 hidden-source-map 这种完整但较慢的选项。 在 webpack.dev.js 中添加以下代码：</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain" data-99-js-token="module-0-0">module</span><span class="token punctuation" style="color:#393A34" data-99-js-token=".-0-6">.</span><span class="token property-access" data-99-js-token="exports-0-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-99-js-token="=-0-15">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-99-js-token="merge-0-17">merge</span><span class="token punctuation" style="color:#393A34" data-99-js-token="(-0-22">(</span><span class="token plain" data-99-js-token="common-0-23">common</span><span class="token punctuation" style="color:#393A34" data-99-js-token=",-0-29">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-99-js-token="{-0-31">{</span><span class="token plain" data-99-js-token="-0-32"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  mode</span><span class="token operator" style="color:#393A34" data-99-js-token=":-1-6">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-99-js-token="&#x27;development&#x27;-1-8">&#x27;development&#x27;</span><span class="token punctuation" style="color:#393A34" data-99-js-token=",-1-21">,</span><span class="token plain" data-99-js-token="-1-22"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  devtool</span><span class="token operator" style="color:#393A34" data-99-js-token=":-2-9">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-99-js-token="&#x27;eval-source-map&#x27;-2-11">&#x27;eval-source-map&#x27;</span><span class="token punctuation" style="color:#393A34" data-99-js-token=",-2-28">,</span><span class="token plain" data-99-js-token="-2-29"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-99-js-token="-3-0"></span><span class="token punctuation" style="color:#393A34" data-99-js-token="}-3-0">}</span><span class="token punctuation" style="color:#393A34" data-99-js-token=")-3-1">)</span></div></pre></div><p>在生产环境中我直接设为 false ，不需要 source-map 功能，在 webpack.prod.js 中添加以下代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">module.exports = merge(common, {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  mode: &#x27;production&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  devtool: false,</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-100-unknown-token="})-3-0">})</span></div></pre></div><p>通过上面配置，我们本地进行开发时，代码出现了错误，控制台的错误日志就会精确地告诉你错误的代码文件、位置等信息。比如我们在 src/app.js 中第 5 行故意写个错误代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">const root = document.querySelector(&#x27;#root&#x27;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">root.innerHTML = &#x27;React18 + Ts5 + webpack5 开发模板搭建&#x27;;</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-101-unknown-token="-2-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">const a = &#x27;212132321321&#x27;;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">a = 21321321321;</span></div></pre></div><p>效果如下</p><p><img src="/front_end_engineer_book/static/image-20240615121621540.fc304810.png" alt="image-20240615121621540"/></p><h2 id="打包编译前清理-dist-目录"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#打包编译前清理-dist-目录"><span class="icon icon-link"></span></a>打包编译前清理 dist 目录</h2><p>如果不清理，dist下面的打包输出会一直累积，但是只有在生产环境下，因为我们开发环境不需要哈希值，所以每次都是app.js会直接替换文件内容</p><p><img src="/front_end_engineer_book/static/image-20240615121626758.bf02e2d2.png" alt="image-20240615121626758"/></p><p>借助 clean-webpack-plugin 可以实现每次打包前先处理掉之前的 dist 目录，以保证每次打出的都是当前最新的，我们先安装它：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">yarn add clean-webpack-plugin@4.0.0 -D</span></div></pre></div><p>打开 webpack.prod.js 文件，增加以下代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f" data-103-js-token="const-0-0">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-103-js-token="{-0-6">{</span><span class="token plain" data-103-js-token="merge-0-7">merge</span><span class="token punctuation" style="color:#393A34" data-103-js-token="}-0-12">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-103-js-token="=-0-14">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-103-js-token="require-0-16">require</span><span class="token punctuation" style="color:#393A34" data-103-js-token="(-0-23">(</span><span class="token string" style="color:#e3116c" data-103-js-token="&#x27;webpack-merge&#x27;-0-24">&#x27;webpack-merge&#x27;</span><span class="token punctuation" style="color:#393A34" data-103-js-token=")-0-39">)</span><span class="token punctuation" style="color:#393A34" data-103-js-token=";-0-40">;</span><span class="token plain" data-103-js-token="-0-41"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-103-js-token="-1-0"></span><span class="token keyword" style="color:#00009f" data-103-js-token="const-1-0">const</span><span class="token plain"> common </span><span class="token operator" style="color:#393A34" data-103-js-token="=-1-13">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-103-js-token="require-1-15">require</span><span class="token punctuation" style="color:#393A34" data-103-js-token="(-1-22">(</span><span class="token string" style="color:#e3116c" data-103-js-token="&#x27;./webpack.common.js&#x27;-1-23">&#x27;./webpack.common.js&#x27;</span><span class="token punctuation" style="color:#393A34" data-103-js-token=")-1-44">)</span><span class="token punctuation" style="color:#393A34" data-103-js-token=";-1-45">;</span><span class="token plain" data-103-js-token="-1-46"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-103-js-token="-2-0"></span><span class="token keyword" style="color:#00009f" data-103-js-token="const-2-0">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-103-js-token="{-2-6">{</span><span class="token maybe-class-name" data-103-js-token="CleanWebpackPlugin-2-7">CleanWebpackPlugin</span><span class="token punctuation" style="color:#393A34" data-103-js-token="}-2-25">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-103-js-token="=-2-27">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-103-js-token="require-2-29">require</span><span class="token punctuation" style="color:#393A34" data-103-js-token="(-2-36">(</span><span class="token string" style="color:#e3116c" data-103-js-token="&#x27;clean-webpack-plugin&#x27;-2-37">&#x27;clean-webpack-plugin&#x27;</span><span class="token punctuation" style="color:#393A34" data-103-js-token=")-2-59">)</span><span class="token punctuation" style="color:#393A34" data-103-js-token=";-2-60">;</span><span class="token plain" data-103-js-token="-2-61"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-103-js-token="-3-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-103-js-token="-4-0"></span><span class="token keyword" style="color:#00009f" data-103-js-token="const-4-0">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-103-js-token="PLUGINS-4-6">PLUGINS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-103-js-token="=-4-14">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-103-js-token="[-4-16">[</span><span class="token keyword" style="color:#00009f" data-103-js-token="new-4-17">new</span><span class="token plain"> </span><span class="token class-name" data-103-js-token="CleanWebpackPlugin-4-21">CleanWebpackPlugin</span><span class="token punctuation" style="color:#393A34" data-103-js-token="(-4-39">(</span><span class="token punctuation" style="color:#393A34" data-103-js-token=")-4-40">)</span><span class="token punctuation" style="color:#393A34" data-103-js-token="]-4-41">]</span><span class="token punctuation" style="color:#393A34" data-103-js-token=";-4-42">;</span><span class="token plain" data-103-js-token="-4-43"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-103-js-token="module-5-0">module</span><span class="token punctuation" style="color:#393A34" data-103-js-token=".-5-6">.</span><span class="token property-access" data-103-js-token="exports-5-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-103-js-token="=-5-15">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-103-js-token="merge-5-17">merge</span><span class="token punctuation" style="color:#393A34" data-103-js-token="(-5-22">(</span><span class="token plain" data-103-js-token="common-5-23">common</span><span class="token punctuation" style="color:#393A34" data-103-js-token=",-5-29">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-103-js-token="{-5-31">{</span><span class="token plain" data-103-js-token="-5-32"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-103-js-token="plugins-6-0">	plugins</span><span class="token operator" style="color:#393A34" data-103-js-token=":-6-8">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-103-js-token="PLUGINS-6-10">PLUGINS</span><span class="token punctuation" style="color:#393A34" data-103-js-token=",-6-17">,</span><span class="token plain" data-103-js-token="-6-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-103-js-token="-7-0"></span><span class="token punctuation" style="color:#393A34" data-103-js-token="}-7-0">}</span><span class="token punctuation" style="color:#393A34" data-103-js-token=")-7-1">)</span><span class="token punctuation" style="color:#393A34" data-103-js-token=";-7-2">;</span></div></pre></div><p>效果如下</p><p><img src="/front_end_engineer_book/static/image-20240615121633327.61995419.png" alt="image-20240615121633327"/></p><h2 id="样式文件处理"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#样式文件处理"><span class="icon icon-link"></span></a>样式文件处理</h2><h3 id="处理-css-文件"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#处理-css-文件"><span class="icon icon-link"></span></a>处理 .css 文件</h3><p>在 src/ 目录下新建一个 <code>app.css</code> 文件，给 #root 随便添加一个样式， app.js 中通过 <code>import &#x27;./app.css&#x27;</code> ，再进行打包或本地服务启动，webpack 直接就会报错，报错告诉我们，我们可能需要一个其他loader去支持这种文件，因为 webpack 只会编译 .js 文件，它是不支持直接处理 .css 、 .less 或 .scss 文件的。</p><p><img src="/front_end_engineer_book/static/image-20240615121638213.39762a50.png" alt="image-20240615121638213"/></p><p>我们需要安装 style-loader 和 css-loader ：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">yarn add style-loader@3.3.4 css-loader@6.10.0 -D</span></div></pre></div><p>遇到后缀为 .css 的文件，webpack 先用 css-loader 加载器去解析这个文件，遇到 @import 等语句就将相应样式文件引入（所以如果没有 css-loader ，就没法解析这类语句），计算后生成css字符串，接下来 style-loader 处理此字符串生成一个内容为最终解析完的 css 代码的 style 标签，放到 head 标签里。</p><p>loader 是有顺序的，webpack 肯定是先将所有 css 模块依赖解析完得到计算结果再创建 style 标签。因此应该把 style-loader 放在 css-loader 的前面（webpack loader 的执行顺序是从右到左，即从后往前）。 于是，打开我们的 webpack.common.js ，写入以下代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain" data-105-js-token="module-0-0">module</span><span class="token punctuation" style="color:#393A34" data-105-js-token=".-0-6">.</span><span class="token property-access" data-105-js-token="exports-0-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-105-js-token="=-0-15">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-105-js-token="{-0-17">{</span><span class="token plain" data-105-js-token="-0-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-105-js-token="-1-0">	</span><span class="token comment" style="color:#999988;font-style:italic">// other...</span><span class="token plain" data-105-js-token="-1-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  module</span><span class="token operator" style="color:#393A34" data-105-js-token=":-2-8">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-105-js-token="{-2-10">{</span><span class="token plain" data-105-js-token="-2-11"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    rules</span><span class="token operator" style="color:#393A34" data-105-js-token=":-3-9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-105-js-token="[-3-11">[</span><span class="token plain" data-105-js-token="-3-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34" data-105-js-token="{-4-6">{</span><span class="token plain" data-105-js-token="-4-7"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        test</span><span class="token operator" style="color:#393A34" data-105-js-token=":-5-12">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa" data-105-js-token="/-5-14">/</span><span class="token regex regex-source language-regex" style="color:#36acaa" data-105-js-token="\.css$-5-15">\.css$</span><span class="token regex regex-delimiter" style="color:#36acaa" data-105-js-token="/-5-21">/</span><span class="token punctuation" style="color:#393A34" data-105-js-token=",-5-22">,</span><span class="token plain" data-105-js-token="-5-23"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        use</span><span class="token operator" style="color:#393A34" data-105-js-token=":-6-11">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-105-js-token="[-6-13">[</span><span class="token plain" data-105-js-token="-6-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c" data-105-js-token="&#x27;style-loader&#x27;-7-10">&#x27;style-loader&#x27;</span><span class="token punctuation" style="color:#393A34" data-105-js-token=",-7-24">,</span><span class="token plain" data-105-js-token="-7-25"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34" data-105-js-token="{-8-10">{</span><span class="token plain" data-105-js-token="-8-11"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            loader</span><span class="token operator" style="color:#393A34" data-105-js-token=":-9-18">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-105-js-token="&#x27;css-loader&#x27;-9-20">&#x27;css-loader&#x27;</span><span class="token punctuation" style="color:#393A34" data-105-js-token=",-9-32">,</span><span class="token plain" data-105-js-token="-9-33"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            options</span><span class="token operator" style="color:#393A34" data-105-js-token=":-10-19">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-105-js-token="{-10-21">{</span><span class="token plain" data-105-js-token="-10-22"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              modules</span><span class="token operator" style="color:#393A34" data-105-js-token=":-11-21">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-105-js-token="false-11-23">false</span><span class="token punctuation" style="color:#393A34" data-105-js-token=",-11-28">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 默认就是 false, 若要开启，可在官网具体查看可配置项</span><span class="token plain" data-105-js-token="-11-62"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              sourceMap</span><span class="token operator" style="color:#393A34" data-105-js-token=":-12-23">:</span><span class="token plain"> isDev</span><span class="token punctuation" style="color:#393A34" data-105-js-token=",-12-30">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 开启后与 devtool 设置一致, 开发环境开启，生产环境关闭</span><span class="token plain" data-105-js-token="-12-67"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              importLoaders</span><span class="token operator" style="color:#393A34" data-105-js-token=":-13-27">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa" data-105-js-token="0-13-29">0</span><span class="token punctuation" style="color:#393A34" data-105-js-token=",-13-30">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 指定在 CSS loader 处理前使用的 laoder 数量</span><span class="token plain" data-105-js-token="-13-66"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34" data-105-js-token="}-14-12">}</span><span class="token punctuation" style="color:#393A34" data-105-js-token=",-14-13">,</span><span class="token plain" data-105-js-token="-14-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34" data-105-js-token="}-15-10">}</span><span class="token punctuation" style="color:#393A34" data-105-js-token=",-15-11">,</span><span class="token plain" data-105-js-token="-15-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34" data-105-js-token="]-16-8">]</span><span class="token punctuation" style="color:#393A34" data-105-js-token=",-16-9">,</span><span class="token plain" data-105-js-token="-16-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34" data-105-js-token="}-17-6">}</span><span class="token punctuation" style="color:#393A34" data-105-js-token=",-17-7">,</span><span class="token plain" data-105-js-token="-17-8"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34" data-105-js-token="]-18-4">]</span><span class="token plain" data-105-js-token="-18-5"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34" data-105-js-token="}-19-2">}</span><span class="token punctuation" style="color:#393A34" data-105-js-token=",-19-3">,</span><span class="token plain" data-105-js-token="-19-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-105-js-token="-20-0"></span><span class="token punctuation" style="color:#393A34" data-105-js-token="}-20-0">}</span></div></pre></div><p>test 字段是匹配规则，针对符合规则的文件进行处理。</p><p>use 字段有几种写法：</p><ul><li>可以是一个字符串，假如我们只使用 style-loader ，只需要 use: &#x27;style-loader&#x27; 。</li><li>可以是一个数组，假如我们不对 css-loader 做额外配置，只需要 use: [&#x27;style-loader&#x27;, &#x27;css-loader&#x27;] 。</li><li>数组的每一项既可以是字符串也可以是一个对象，当我们需要在webpack 的配置文件中对 loader 进行配置，就需要将其编写为一个对象，并且在此对象的 options 字段中进行配置。比如我们上面要对 css-loader 做配置的写法。 效果如下</li></ul><p><img src="/front_end_engineer_book/static/image-20240615121643154.7b783519.png" alt="image-20240615121643154"/></p><h3 id="less文件的处理"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#less文件的处理"><span class="icon icon-link"></span></a>LESS文件的处理</h3><p>我们先把app.css改为app.less，import也改为引入less文件，这时候会报跟css一样的错，处理 .less 文件我们需要安装 less 和 less-loader ：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">yarn add less@4.2.0 less-loader@12.2.0 -D</span></div></pre></div><p>遇到后缀为 .less 文件，</p><ul><li>less-loader 会将你写的 less 语法转换为 css 语法，并转为 .css 文件。</li><li>less-loader 依赖于 less ，所以必须都安装。 继续在 webpack.common.js 中写入代码：</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain" data-107-js-token="module-0-0">module</span><span class="token punctuation" style="color:#393A34" data-107-js-token=".-0-6">.</span><span class="token property-access" data-107-js-token="exports-0-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-107-js-token="=-0-15">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-107-js-token="{-0-17">{</span><span class="token plain" data-107-js-token="-0-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-107-js-token="-1-0">	</span><span class="token comment" style="color:#999988;font-style:italic">// other...</span><span class="token plain" data-107-js-token="-1-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  module</span><span class="token operator" style="color:#393A34" data-107-js-token=":-2-8">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-107-js-token="{-2-10">{</span><span class="token plain" data-107-js-token="-2-11"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    rules</span><span class="token operator" style="color:#393A34" data-107-js-token=":-3-9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-107-js-token="[-3-11">[</span><span class="token plain" data-107-js-token="-3-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34" data-107-js-token="{-4-6">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* ... */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-107-js-token="}-4-18">}</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-4-19">,</span><span class="token plain" data-107-js-token="-4-20"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34" data-107-js-token="{-5-6">{</span><span class="token plain" data-107-js-token="-5-7"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        test</span><span class="token operator" style="color:#393A34" data-107-js-token=":-6-12">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa" data-107-js-token="/-6-14">/</span><span class="token regex regex-source language-regex" style="color:#36acaa" data-107-js-token="\.less$-6-15">\.less$</span><span class="token regex regex-delimiter" style="color:#36acaa" data-107-js-token="/-6-22">/</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-6-23">,</span><span class="token plain" data-107-js-token="-6-24"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        use</span><span class="token operator" style="color:#393A34" data-107-js-token=":-7-11">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-107-js-token="[-7-13">[</span><span class="token plain" data-107-js-token="-7-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c" data-107-js-token="&#x27;style-loader&#x27;-8-10">&#x27;style-loader&#x27;</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-8-24">,</span><span class="token plain" data-107-js-token="-8-25"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34" data-107-js-token="{-9-10">{</span><span class="token plain" data-107-js-token="-9-11"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            loader</span><span class="token operator" style="color:#393A34" data-107-js-token=":-10-18">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-107-js-token="&#x27;css-loader&#x27;-10-20">&#x27;css-loader&#x27;</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-10-32">,</span><span class="token plain" data-107-js-token="-10-33"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            options</span><span class="token operator" style="color:#393A34" data-107-js-token=":-11-19">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-107-js-token="{-11-21">{</span><span class="token plain" data-107-js-token="-11-22"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              modules</span><span class="token operator" style="color:#393A34" data-107-js-token=":-12-21">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-107-js-token="false-12-23">false</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-12-28">,</span><span class="token plain" data-107-js-token="-12-29"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              sourceMap</span><span class="token operator" style="color:#393A34" data-107-js-token=":-13-23">:</span><span class="token plain"> isDev</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-13-30">,</span><span class="token plain" data-107-js-token="-13-31"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              importLoaders</span><span class="token operator" style="color:#393A34" data-107-js-token=":-14-27">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa" data-107-js-token="1-14-29">1</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-14-30">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 需要先被 less-loader 处理，所以这里设置为 1</span><span class="token plain" data-107-js-token="-14-64"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34" data-107-js-token="}-15-12">}</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-15-13">,</span><span class="token plain" data-107-js-token="-15-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34" data-107-js-token="}-16-10">}</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-16-11">,</span><span class="token plain" data-107-js-token="-16-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34" data-107-js-token="{-17-10">{</span><span class="token plain" data-107-js-token="-17-11"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            loader</span><span class="token operator" style="color:#393A34" data-107-js-token=":-18-18">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-107-js-token="&#x27;less-loader&#x27;-18-20">&#x27;less-loader&#x27;</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-18-33">,</span><span class="token plain" data-107-js-token="-18-34"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            options</span><span class="token operator" style="color:#393A34" data-107-js-token=":-19-19">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-107-js-token="{-19-21">{</span><span class="token plain" data-107-js-token="-19-22"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              sourceMap</span><span class="token operator" style="color:#393A34" data-107-js-token=":-20-23">:</span><span class="token plain"> isDev</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-20-30">,</span><span class="token plain" data-107-js-token="-20-31"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34" data-107-js-token="}-21-12">}</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-21-13">,</span><span class="token plain" data-107-js-token="-21-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34" data-107-js-token="}-22-10">}</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-22-11">,</span><span class="token plain" data-107-js-token="-22-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34" data-107-js-token="]-23-8">]</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-23-9">,</span><span class="token plain" data-107-js-token="-23-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34" data-107-js-token="}-24-6">}</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-24-7">,</span><span class="token plain" data-107-js-token="-24-8"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34" data-107-js-token="]-25-4">]</span><span class="token plain" data-107-js-token="-25-5"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34" data-107-js-token="}-26-2">}</span><span class="token punctuation" style="color:#393A34" data-107-js-token=",-26-3">,</span><span class="token plain" data-107-js-token="-26-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-107-js-token="-27-0"></span><span class="token punctuation" style="color:#393A34" data-107-js-token="}-27-0">}</span></div></pre></div><h3 id="sass-样式文件处理"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#sass-样式文件处理"><span class="icon icon-link"></span></a>SASS 样式文件处理</h3><p>更改app.less为app.scss, import也更改为scss文件，处理 .scss 文件我们需要安装 node-sass 和 sass-loader ：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">yarn add node-sass@9.0.0 sass-loader@14.1.1 -D</span></div></pre></div><p>遇到 .scss 后缀的文件， sass-loader 会将你写的 sass 语法转为 css 语法，并转为 .css 文件。 同样地， sass-loader 依赖于 node-sass ，所以两个都需要安装。（ node-sass 如果没有配置yarnrc文件的话可能需要挂代理， 我这里是配置了淘宝源） 继续在 webpack.common.js 中写入代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain" data-109-js-token="module-0-0">module</span><span class="token punctuation" style="color:#393A34" data-109-js-token=".-0-6">.</span><span class="token property-access" data-109-js-token="exports-0-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-109-js-token="=-0-15">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-109-js-token="{-0-17">{</span><span class="token plain" data-109-js-token="-0-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-109-js-token="-1-0">	</span><span class="token comment" style="color:#999988;font-style:italic">// other...</span><span class="token plain" data-109-js-token="-1-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  module</span><span class="token operator" style="color:#393A34" data-109-js-token=":-2-8">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-109-js-token="{-2-10">{</span><span class="token plain" data-109-js-token="-2-11"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    rules</span><span class="token operator" style="color:#393A34" data-109-js-token=":-3-9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-109-js-token="[-3-11">[</span><span class="token plain" data-109-js-token="-3-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34" data-109-js-token="{-4-6">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* ... */</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-109-js-token="}-4-18">}</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-4-19">,</span><span class="token plain" data-109-js-token="-4-20"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34" data-109-js-token="{-5-6">{</span><span class="token plain" data-109-js-token="-5-7"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        test</span><span class="token operator" style="color:#393A34" data-109-js-token=":-6-12">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa" data-109-js-token="/-6-14">/</span><span class="token regex regex-source language-regex" style="color:#36acaa" data-109-js-token="\.scss$-6-15">\.scss$</span><span class="token regex regex-delimiter" style="color:#36acaa" data-109-js-token="/-6-22">/</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-6-23">,</span><span class="token plain" data-109-js-token="-6-24"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        use</span><span class="token operator" style="color:#393A34" data-109-js-token=":-7-11">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-109-js-token="[-7-13">[</span><span class="token plain" data-109-js-token="-7-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c" data-109-js-token="&#x27;style-loader&#x27;-8-10">&#x27;style-loader&#x27;</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-8-24">,</span><span class="token plain" data-109-js-token="-8-25"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34" data-109-js-token="{-9-10">{</span><span class="token plain" data-109-js-token="-9-11"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            loader</span><span class="token operator" style="color:#393A34" data-109-js-token=":-10-18">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-109-js-token="&#x27;css-loader&#x27;-10-20">&#x27;css-loader&#x27;</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-10-32">,</span><span class="token plain" data-109-js-token="-10-33"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            options</span><span class="token operator" style="color:#393A34" data-109-js-token=":-11-19">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-109-js-token="{-11-21">{</span><span class="token plain" data-109-js-token="-11-22"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              modules</span><span class="token operator" style="color:#393A34" data-109-js-token=":-12-21">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-109-js-token="false-12-23">false</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-12-28">,</span><span class="token plain" data-109-js-token="-12-29"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              sourceMap</span><span class="token operator" style="color:#393A34" data-109-js-token=":-13-23">:</span><span class="token plain"> isDev</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-13-30">,</span><span class="token plain" data-109-js-token="-13-31"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              importLoaders</span><span class="token operator" style="color:#393A34" data-109-js-token=":-14-27">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa" data-109-js-token="1-14-29">1</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-14-30">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 需要先被 sass-loader 处理，所以这里设置为 1</span><span class="token plain" data-109-js-token="-14-64"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34" data-109-js-token="}-15-12">}</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-15-13">,</span><span class="token plain" data-109-js-token="-15-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34" data-109-js-token="}-16-10">}</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-16-11">,</span><span class="token plain" data-109-js-token="-16-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34" data-109-js-token="{-17-10">{</span><span class="token plain" data-109-js-token="-17-11"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            loader</span><span class="token operator" style="color:#393A34" data-109-js-token=":-18-18">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-109-js-token="&#x27;sass-loader&#x27;-18-20">&#x27;sass-loader&#x27;</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-18-33">,</span><span class="token plain" data-109-js-token="-18-34"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            options</span><span class="token operator" style="color:#393A34" data-109-js-token=":-19-19">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-109-js-token="{-19-21">{</span><span class="token plain" data-109-js-token="-19-22"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              sourceMap</span><span class="token operator" style="color:#393A34" data-109-js-token=":-20-23">:</span><span class="token plain"> isDev</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-20-30">,</span><span class="token plain" data-109-js-token="-20-31"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34" data-109-js-token="}-21-12">}</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-21-13">,</span><span class="token plain" data-109-js-token="-21-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34" data-109-js-token="}-22-10">}</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-22-11">,</span><span class="token plain" data-109-js-token="-22-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34" data-109-js-token="]-23-8">]</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-23-9">,</span><span class="token plain" data-109-js-token="-23-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34" data-109-js-token="}-24-6">}</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-24-7">,</span><span class="token plain" data-109-js-token="-24-8"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34" data-109-js-token="]-25-4">]</span><span class="token plain" data-109-js-token="-25-5"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34" data-109-js-token="}-26-2">}</span><span class="token punctuation" style="color:#393A34" data-109-js-token=",-26-3">,</span><span class="token plain" data-109-js-token="-26-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-109-js-token="-27-0"></span><span class="token punctuation" style="color:#393A34" data-109-js-token="}-27-0">}</span></div></pre></div><p>执行 <code>yarn run start</code> ，样式就已经正常加载了。</p><h3 id="postcss-处理浏览器兼容问题"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#postcss-处理浏览器兼容问题"><span class="icon icon-link"></span></a>PostCSS 处理浏览器兼容问题</h3><p>postcss 一种对 css 编译的工具，类似 babel 对 js 一样通过各种插件对 css 进行处理，在这里我们主要使用以下插件：</p><ul><li>postcss-flexbugs-fixes ：用于修复一些和 flex 布局相关的 bug。</li><li>postcss-preset-env ：将最新的 CSS 语法转换为目标环境的浏览器能够理解的 CSS 语法，目的是使开发者不用考虑浏览器兼容问题。我们使用 autoprefixer 来自动添加浏览器头。</li><li>postcss-normalize ：从 browserslist 中自动导入所需要的 normalize.css 内容。 安装上面提到的所需的包：</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-unknown" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token plain">yarn add postcss@8.4.35 postcss-loader@8.1.1 postcss-flexbugs-fixes@5.0.2 postcss-preset-env@9.5.1 autoprefixer@10.4.18 postcss-normalize@10.0.1 -D</span></div></pre></div><p>根目录增加postcss.config.js文件，新增如下配置</p><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f" data-111-js-token="const-0-0">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-111-js-token="{-0-6">{</span><span class="token plain" data-111-js-token="isDev-0-7">isDev</span><span class="token punctuation" style="color:#393A34" data-111-js-token="}-0-12">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-111-js-token="=-0-14">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-111-js-token="require-0-16">require</span><span class="token punctuation" style="color:#393A34" data-111-js-token="(-0-23">(</span><span class="token string" style="color:#e3116c" data-111-js-token="&#x27;./scripts/constants&#x27;-0-24">&#x27;./scripts/constants&#x27;</span><span class="token punctuation" style="color:#393A34" data-111-js-token=")-0-45">)</span><span class="token punctuation" style="color:#393A34" data-111-js-token=";-0-46">;</span><span class="token plain" data-111-js-token="-0-47"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="module-1-0">module</span><span class="token punctuation" style="color:#393A34" data-111-js-token=".-1-6">.</span><span class="token property-access" data-111-js-token="exports-1-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-111-js-token="=-1-15">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-111-js-token="{-1-17">{</span><span class="token plain" data-111-js-token="-1-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="ident-2-0">	ident</span><span class="token operator" style="color:#393A34" data-111-js-token=":-2-6">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-111-js-token="&#x27;postcss&#x27;-2-8">&#x27;postcss&#x27;</span><span class="token punctuation" style="color:#393A34" data-111-js-token=",-2-17">,</span><span class="token plain" data-111-js-token="-2-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="plugins-3-0">	plugins</span><span class="token operator" style="color:#393A34" data-111-js-token=":-3-8">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-111-js-token="[-3-10">[</span><span class="token plain" data-111-js-token="-3-11"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="-4-0">		</span><span class="token comment" style="color:#999988;font-style:italic">// 修复一些和 flex 布局相关的 bug</span><span class="token plain" data-111-js-token="-4-25"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="-5-0">		</span><span class="token function" style="color:#d73a49" data-111-js-token="require-5-2">require</span><span class="token punctuation" style="color:#393A34" data-111-js-token="(-5-9">(</span><span class="token string" style="color:#e3116c" data-111-js-token="&#x27;postcss-flexbugs-fixes&#x27;-5-10">&#x27;postcss-flexbugs-fixes&#x27;</span><span class="token punctuation" style="color:#393A34" data-111-js-token=")-5-34">)</span><span class="token punctuation" style="color:#393A34" data-111-js-token=",-5-35">,</span><span class="token plain" data-111-js-token="-5-36"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="-6-0">		</span><span class="token function" style="color:#d73a49" data-111-js-token="require-6-2">require</span><span class="token punctuation" style="color:#393A34" data-111-js-token="(-6-9">(</span><span class="token string" style="color:#e3116c" data-111-js-token="&#x27;postcss-preset-env&#x27;-6-10">&#x27;postcss-preset-env&#x27;</span><span class="token punctuation" style="color:#393A34" data-111-js-token=")-6-30">)</span><span class="token punctuation" style="color:#393A34" data-111-js-token="(-6-31">(</span><span class="token punctuation" style="color:#393A34" data-111-js-token="{-6-32">{</span><span class="token plain" data-111-js-token="-6-33"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="autoprefixer-7-0">			autoprefixer</span><span class="token operator" style="color:#393A34" data-111-js-token=":-7-15">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-111-js-token="{-7-17">{</span><span class="token plain" data-111-js-token="-7-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="grid-8-0">				grid</span><span class="token operator" style="color:#393A34" data-111-js-token=":-8-8">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-111-js-token="true-8-10">true</span><span class="token punctuation" style="color:#393A34" data-111-js-token=",-8-14">,</span><span class="token plain" data-111-js-token="-8-15"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="flexbox-9-0">				flexbox</span><span class="token operator" style="color:#393A34" data-111-js-token=":-9-11">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-111-js-token="&#x27;no-2009&#x27;-9-13">&#x27;no-2009&#x27;</span><span class="token punctuation" style="color:#393A34" data-111-js-token=",-9-22">,</span><span class="token plain" data-111-js-token="-9-23"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="-10-0">			</span><span class="token punctuation" style="color:#393A34" data-111-js-token="}-10-3">}</span><span class="token punctuation" style="color:#393A34" data-111-js-token=",-10-4">,</span><span class="token plain" data-111-js-token="-10-5"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="stage-11-0">			stage</span><span class="token operator" style="color:#393A34" data-111-js-token=":-11-8">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa" data-111-js-token="3-11-10">3</span><span class="token punctuation" style="color:#393A34" data-111-js-token=",-11-11">,</span><span class="token plain" data-111-js-token="-11-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="-12-0">		</span><span class="token punctuation" style="color:#393A34" data-111-js-token="}-12-2">}</span><span class="token punctuation" style="color:#393A34" data-111-js-token=")-12-3">)</span><span class="token punctuation" style="color:#393A34" data-111-js-token=",-12-4">,</span><span class="token plain" data-111-js-token="-12-5"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="-13-0">		</span><span class="token function" style="color:#d73a49" data-111-js-token="require-13-2">require</span><span class="token punctuation" style="color:#393A34" data-111-js-token="(-13-9">(</span><span class="token string" style="color:#e3116c" data-111-js-token="&#x27;postcss-normalize&#x27;-13-10">&#x27;postcss-normalize&#x27;</span><span class="token punctuation" style="color:#393A34" data-111-js-token=")-13-29">)</span><span class="token punctuation" style="color:#393A34" data-111-js-token=",-13-30">,</span><span class="token plain" data-111-js-token="-13-31"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="-14-0">	</span><span class="token punctuation" style="color:#393A34" data-111-js-token="]-14-1">]</span><span class="token punctuation" style="color:#393A34" data-111-js-token=",-14-2">,</span><span class="token plain" data-111-js-token="-14-3"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="sourceMap-15-0">	sourceMap</span><span class="token operator" style="color:#393A34" data-111-js-token=":-15-10">:</span><span class="token plain"> isDev</span><span class="token punctuation" style="color:#393A34" data-111-js-token=",-15-17">,</span><span class="token plain" data-111-js-token="-15-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-111-js-token="-16-0"></span><span class="token punctuation" style="color:#393A34" data-111-js-token="}-16-0">}</span><span class="token punctuation" style="color:#393A34" data-111-js-token=";-16-1">;</span></div></pre></div><p>更改webpack.common.js，这里我们提取重复的逻辑</p><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f" data-112-js-token="const-0-0">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49" data-112-js-token="getCssLoaders-0-6">getCssLoaders</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-112-js-token="=-0-20">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-112-js-token="(-0-22">(</span><span class="token parameter" data-112-js-token="importLoaders-0-23">importLoaders</span><span class="token punctuation" style="color:#393A34" data-112-js-token=")-0-36">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34" data-112-js-token="=&gt;-0-38">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-112-js-token="[-0-41">[</span><span class="token plain" data-112-js-token="-0-42"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-1-0">	</span><span class="token string" style="color:#e3116c" data-112-js-token="&#x27;style-loader&#x27;-1-1">&#x27;style-loader&#x27;</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-1-15">,</span><span class="token plain" data-112-js-token="-1-16"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-2-0">	</span><span class="token punctuation" style="color:#393A34" data-112-js-token="{-2-1">{</span><span class="token plain" data-112-js-token="-2-2"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="loader-3-0">		loader</span><span class="token operator" style="color:#393A34" data-112-js-token=":-3-8">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-112-js-token="&#x27;css-loader&#x27;-3-10">&#x27;css-loader&#x27;</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-3-22">,</span><span class="token plain" data-112-js-token="-3-23"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="options-4-0">		options</span><span class="token operator" style="color:#393A34" data-112-js-token=":-4-9">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-112-js-token="{-4-11">{</span><span class="token plain" data-112-js-token="-4-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="modules-5-0">			modules</span><span class="token operator" style="color:#393A34" data-112-js-token=":-5-10">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa" data-112-js-token="false-5-12">false</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-5-17">,</span><span class="token plain" data-112-js-token="-5-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="sourceMap-6-0">			sourceMap</span><span class="token operator" style="color:#393A34" data-112-js-token=":-6-12">:</span><span class="token plain"> isDev</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-6-19">,</span><span class="token plain" data-112-js-token="-6-20"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="importLoaders-7-0">			importLoaders</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-7-16">,</span><span class="token plain" data-112-js-token="-7-17"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-8-0">		</span><span class="token punctuation" style="color:#393A34" data-112-js-token="}-8-2">}</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-8-3">,</span><span class="token plain" data-112-js-token="-8-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-9-0">	</span><span class="token punctuation" style="color:#393A34" data-112-js-token="}-9-1">}</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-9-2">,</span><span class="token plain" data-112-js-token="-9-3"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-10-0">	</span><span class="token string" style="color:#e3116c" data-112-js-token="&#x27;postcss-loader&#x27;-10-1">&#x27;postcss-loader&#x27;</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-10-17">,</span><span class="token plain" data-112-js-token="-10-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-11-0"></span><span class="token punctuation" style="color:#393A34" data-112-js-token="]-11-0">]</span><span class="token punctuation" style="color:#393A34" data-112-js-token=";-11-1">;</span><span class="token plain" data-112-js-token="-11-2"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block" data-112-js-token="-12-0">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="module-13-0">module</span><span class="token punctuation" style="color:#393A34" data-112-js-token=".-13-6">.</span><span class="token property-access" data-112-js-token="exports-13-7">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-112-js-token="=-13-15">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-112-js-token="{-13-17">{</span><span class="token plain" data-112-js-token="-13-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="mode-14-0">	mode</span><span class="token operator" style="color:#393A34" data-112-js-token=":-14-5">:</span><span class="token plain"> isDev </span><span class="token operator" style="color:#393A34" data-112-js-token="?-14-13">?</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-112-js-token="&#x27;development&#x27;-14-15">&#x27;development&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-112-js-token=":-14-29">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-112-js-token="&#x27;production&#x27;-14-31">&#x27;production&#x27;</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-14-43">,</span><span class="token plain" data-112-js-token="-14-44"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="entry-15-0">	entry</span><span class="token operator" style="color:#393A34" data-112-js-token=":-15-6">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-112-js-token="{-15-8">{</span><span class="token plain" data-112-js-token="-15-9"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="app-16-0">		app</span><span class="token operator" style="color:#393A34" data-112-js-token=":-16-5">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-112-js-token="resolve-16-7">resolve</span><span class="token punctuation" style="color:#393A34" data-112-js-token="(-16-14">(</span><span class="token constant" style="color:#36acaa" data-112-js-token="PROJECT_PATH-16-15">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-16-27">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-112-js-token="&#x27;./src/app.js&#x27;-16-29">&#x27;./src/app.js&#x27;</span><span class="token punctuation" style="color:#393A34" data-112-js-token=")-16-43">)</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-16-44">,</span><span class="token plain" data-112-js-token="-16-45"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-17-0">	</span><span class="token punctuation" style="color:#393A34" data-112-js-token="}-17-1">}</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-17-2">,</span><span class="token plain" data-112-js-token="-17-3"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="output-18-0">	output</span><span class="token operator" style="color:#393A34" data-112-js-token=":-18-7">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-112-js-token="{-18-9">{</span><span class="token plain" data-112-js-token="-18-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="filename-19-0">		filename</span><span class="token operator" style="color:#393A34" data-112-js-token=":-19-10">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c" data-112-js-token="`-19-12">`</span><span class="token template-string string" style="color:#e3116c" data-112-js-token="js/[name]-19-13">js/[name]</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34" data-112-js-token="${-19-22">${</span><span class="token template-string interpolation">isDev </span><span class="token template-string interpolation operator" style="color:#393A34" data-112-js-token="?-19-30">?</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:#e3116c" data-112-js-token="&#x27;&#x27;-19-32">&#x27;&#x27;</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation operator" style="color:#393A34" data-112-js-token=":-19-35">:</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:#e3116c" data-112-js-token="&#x27;.[hash:8]&#x27;-19-37">&#x27;.[hash:8]&#x27;</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34" data-112-js-token="}-19-48">}</span><span class="token template-string string" style="color:#e3116c" data-112-js-token=".js-19-49">.js</span><span class="token template-string template-punctuation string" style="color:#e3116c" data-112-js-token="`-19-52">`</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-19-53">,</span><span class="token plain" data-112-js-token="-19-54"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="path-20-0">		path</span><span class="token operator" style="color:#393A34" data-112-js-token=":-20-6">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-112-js-token="resolve-20-8">resolve</span><span class="token punctuation" style="color:#393A34" data-112-js-token="(-20-15">(</span><span class="token constant" style="color:#36acaa" data-112-js-token="PROJECT_PATH-20-16">PROJECT_PATH</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-20-28">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-112-js-token="&#x27;./dist&#x27;-20-30">&#x27;./dist&#x27;</span><span class="token punctuation" style="color:#393A34" data-112-js-token=")-20-38">)</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-20-39">,</span><span class="token plain" data-112-js-token="-20-40"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-21-0">	</span><span class="token punctuation" style="color:#393A34" data-112-js-token="}-21-1">}</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-21-2">,</span><span class="token plain" data-112-js-token="-21-3"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="plugins-22-0">	plugins</span><span class="token operator" style="color:#393A34" data-112-js-token=":-22-8">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa" data-112-js-token="PLUGINS-22-10">PLUGINS</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-22-17">,</span><span class="token plain" data-112-js-token="-22-18"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="module-23-0">	module</span><span class="token operator" style="color:#393A34" data-112-js-token=":-23-7">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-112-js-token="{-23-9">{</span><span class="token plain" data-112-js-token="-23-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="rules-24-0">		rules</span><span class="token operator" style="color:#393A34" data-112-js-token=":-24-7">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-112-js-token="[-24-9">[</span><span class="token plain" data-112-js-token="-24-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-25-0">			</span><span class="token punctuation" style="color:#393A34" data-112-js-token="{-25-3">{</span><span class="token plain" data-112-js-token="-25-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="test-26-0">				test</span><span class="token operator" style="color:#393A34" data-112-js-token=":-26-8">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa" data-112-js-token="/-26-10">/</span><span class="token regex regex-source language-regex" style="color:#36acaa" data-112-js-token="\.css$-26-11">\.css$</span><span class="token regex regex-delimiter" style="color:#36acaa" data-112-js-token="/-26-17">/</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-26-18">,</span><span class="token plain" data-112-js-token="-26-19"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="use-27-0">				use</span><span class="token operator" style="color:#393A34" data-112-js-token=":-27-7">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49" data-112-js-token="getCssLoaders-27-9">getCssLoaders</span><span class="token punctuation" style="color:#393A34" data-112-js-token="(-27-22">(</span><span class="token number" style="color:#36acaa" data-112-js-token="1-27-23">1</span><span class="token punctuation" style="color:#393A34" data-112-js-token=")-27-24">)</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-27-25">,</span><span class="token plain" data-112-js-token="-27-26"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-28-0">			</span><span class="token punctuation" style="color:#393A34" data-112-js-token="}-28-3">}</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-28-4">,</span><span class="token plain" data-112-js-token="-28-5"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-29-0">			</span><span class="token punctuation" style="color:#393A34" data-112-js-token="{-29-3">{</span><span class="token plain" data-112-js-token="-29-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="test-30-0">				test</span><span class="token operator" style="color:#393A34" data-112-js-token=":-30-8">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa" data-112-js-token="/-30-10">/</span><span class="token regex regex-source language-regex" style="color:#36acaa" data-112-js-token="\.less$-30-11">\.less$</span><span class="token regex regex-delimiter" style="color:#36acaa" data-112-js-token="/-30-18">/</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-30-19">,</span><span class="token plain" data-112-js-token="-30-20"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="use-31-0">				use</span><span class="token operator" style="color:#393A34" data-112-js-token=":-31-7">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-112-js-token="[-31-9">[</span><span class="token plain" data-112-js-token="-31-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-32-0">					</span><span class="token spread operator" style="color:#393A34" data-112-js-token="...-32-5">...</span><span class="token method function property-access" style="color:#d73a49" data-112-js-token="getCssLoaders-32-8">getCssLoaders</span><span class="token punctuation" style="color:#393A34" data-112-js-token="(-32-21">(</span><span class="token number" style="color:#36acaa" data-112-js-token="2-32-22">2</span><span class="token punctuation" style="color:#393A34" data-112-js-token=")-32-23">)</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-32-24">,</span><span class="token plain" data-112-js-token="-32-25"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-33-0">					</span><span class="token punctuation" style="color:#393A34" data-112-js-token="{-33-5">{</span><span class="token plain" data-112-js-token="-33-6"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="loader-34-0">						loader</span><span class="token operator" style="color:#393A34" data-112-js-token=":-34-12">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-112-js-token="&#x27;less-loader&#x27;-34-14">&#x27;less-loader&#x27;</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-34-27">,</span><span class="token plain" data-112-js-token="-34-28"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="options-35-0">						options</span><span class="token operator" style="color:#393A34" data-112-js-token=":-35-13">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-112-js-token="{-35-15">{</span><span class="token plain" data-112-js-token="-35-16"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="sourceMap-36-0">							sourceMap</span><span class="token operator" style="color:#393A34" data-112-js-token=":-36-16">:</span><span class="token plain"> isDev</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-36-23">,</span><span class="token plain" data-112-js-token="-36-24"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-37-0">						</span><span class="token punctuation" style="color:#393A34" data-112-js-token="}-37-6">}</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-37-7">,</span><span class="token plain" data-112-js-token="-37-8"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-38-0">					</span><span class="token punctuation" style="color:#393A34" data-112-js-token="}-38-5">}</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-38-6">,</span><span class="token plain" data-112-js-token="-38-7"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-39-0">				</span><span class="token punctuation" style="color:#393A34" data-112-js-token="]-39-4">]</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-39-5">,</span><span class="token plain" data-112-js-token="-39-6"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-40-0">			</span><span class="token punctuation" style="color:#393A34" data-112-js-token="}-40-3">}</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-40-4">,</span><span class="token plain" data-112-js-token="-40-5"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-41-0">			</span><span class="token punctuation" style="color:#393A34" data-112-js-token="{-41-3">{</span><span class="token plain" data-112-js-token="-41-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="test-42-0">				test</span><span class="token operator" style="color:#393A34" data-112-js-token=":-42-8">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa" data-112-js-token="/-42-10">/</span><span class="token regex regex-source language-regex" style="color:#36acaa" data-112-js-token="\.scss$-42-11">\.scss$</span><span class="token regex regex-delimiter" style="color:#36acaa" data-112-js-token="/-42-18">/</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-42-19">,</span><span class="token plain" data-112-js-token="-42-20"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="use-43-0">				use</span><span class="token operator" style="color:#393A34" data-112-js-token=":-43-7">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-112-js-token="[-43-9">[</span><span class="token plain" data-112-js-token="-43-10"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-44-0">					</span><span class="token spread operator" style="color:#393A34" data-112-js-token="...-44-5">...</span><span class="token method function property-access" style="color:#d73a49" data-112-js-token="getCssLoaders-44-8">getCssLoaders</span><span class="token punctuation" style="color:#393A34" data-112-js-token="(-44-21">(</span><span class="token number" style="color:#36acaa" data-112-js-token="2-44-22">2</span><span class="token punctuation" style="color:#393A34" data-112-js-token=")-44-23">)</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-44-24">,</span><span class="token plain" data-112-js-token="-44-25"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-45-0">					</span><span class="token punctuation" style="color:#393A34" data-112-js-token="{-45-5">{</span><span class="token plain" data-112-js-token="-45-6"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="loader-46-0">						loader</span><span class="token operator" style="color:#393A34" data-112-js-token=":-46-12">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-112-js-token="&#x27;sass-loader&#x27;-46-14">&#x27;sass-loader&#x27;</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-46-27">,</span><span class="token plain" data-112-js-token="-46-28"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="options-47-0">						options</span><span class="token operator" style="color:#393A34" data-112-js-token=":-47-13">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-112-js-token="{-47-15">{</span><span class="token plain" data-112-js-token="-47-16"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="sourceMap-48-0">							sourceMap</span><span class="token operator" style="color:#393A34" data-112-js-token=":-48-16">:</span><span class="token plain"> isDev</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-48-23">,</span><span class="token plain" data-112-js-token="-48-24"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-49-0">						</span><span class="token punctuation" style="color:#393A34" data-112-js-token="}-49-6">}</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-49-7">,</span><span class="token plain" data-112-js-token="-49-8"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-50-0">					</span><span class="token punctuation" style="color:#393A34" data-112-js-token="}-50-5">}</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-50-6">,</span><span class="token plain" data-112-js-token="-50-7"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-51-0">				</span><span class="token punctuation" style="color:#393A34" data-112-js-token="]-51-4">]</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-51-5">,</span><span class="token plain" data-112-js-token="-51-6"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-52-0">			</span><span class="token punctuation" style="color:#393A34" data-112-js-token="}-52-3">}</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-52-4">,</span><span class="token plain" data-112-js-token="-52-5"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-53-0">		</span><span class="token punctuation" style="color:#393A34" data-112-js-token="]-53-2">]</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-53-3">,</span><span class="token plain" data-112-js-token="-53-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-54-0">	</span><span class="token punctuation" style="color:#393A34" data-112-js-token="}-54-1">}</span><span class="token punctuation" style="color:#393A34" data-112-js-token=",-54-2">,</span><span class="token plain" data-112-js-token="-54-3"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-112-js-token="-55-0"></span><span class="token punctuation" style="color:#393A34" data-112-js-token="}-55-0">}</span><span class="token punctuation" style="color:#393A34" data-112-js-token=";-55-1">;</span></div></pre></div><p>在 package.json 中添加 browserslist （指定了项目的目标浏览器的范围）</p><div class="__dumi-default-code-block"><pre class="prism-code language-json" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34" data-113-json-token="{-0-0">{</span><span class="token plain" data-113-json-token="-0-1"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa" data-113-json-token="&quot;browserslist&quot;-1-2">&quot;browserslist&quot;</span><span class="token operator" style="color:#393A34" data-113-json-token=":-1-16">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-113-json-token="[-1-18">[</span><span class="token plain" data-113-json-token="-1-19"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c" data-113-json-token="&quot;&gt;0.2%&quot;-2-4">&quot;&gt;0.2%&quot;</span><span class="token punctuation" style="color:#393A34" data-113-json-token=",-2-11">,</span><span class="token plain" data-113-json-token="-2-12"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;not dead&quot;</span><span class="token punctuation" style="color:#393A34" data-113-json-token=",-3-14">,</span><span class="token plain"> </span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ie &gt;= 9&quot;</span><span class="token punctuation" style="color:#393A34" data-113-json-token=",-4-13">,</span><span class="token plain" data-113-json-token="-4-14"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;not op_mini all&quot;</span><span class="token plain" data-113-json-token="-5-21"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34" data-113-json-token="]-6-2">]</span><span class="token punctuation" style="color:#393A34" data-113-json-token=",-6-3">,</span><span class="token plain" data-113-json-token="-6-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-113-json-token="-7-0"></span><span class="token punctuation" style="color:#393A34" data-113-json-token="}-7-0">}</span></div></pre></div><p>现在，在如果你在入口文件（比如我之前一直用的 app.js ）随便引一个写了 display: flex 语法的样式文件， <code>yarn run start</code> 浏览器就自动加上了前缀</p><p><img src="/front_end_engineer_book/static/image-20240615121652351.38b21337.png" alt="image-20240615121652351"/></p><h2 id="处理图片和文件"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#处理图片和文件"><span class="icon icon-link"></span></a>处理图片和文件</h2><p>我们先准备一张图片，在app.js中用import引入<img src="/front_end_engineer_book/static/image-20240615121701174.4f5012b3.png" alt="image-20240615121701174"/></p><p><img src="/front_end_engineer_book/static/image-20240615121707698.b8dc39c5.png" alt="image-20240615121707698"/></p><p>这时候会报错，我们需要loader去处理图片文件，我们增加如下配置</p><div class="__dumi-default-code-block"><pre class="prism-code language-js" style="color:#393A34;background-color:#f6f8fa"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 处理图片、文件、字体</span><span class="token plain" data-114-js-token="-0-13"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-114-js-token="-1-0"></span><span class="token punctuation" style="color:#393A34" data-114-js-token="{-1-0">{</span><span class="token plain" data-114-js-token="-1-1"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  test</span><span class="token operator" style="color:#393A34" data-114-js-token=":-2-6">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa" data-114-js-token="/-2-8">/</span><span class="token regex regex-source language-regex" style="color:#36acaa" data-114-js-token="\.(png|svg|jpg|jpeg|gif)$-2-9">\.(png|svg|jpg|jpeg|gif)$</span><span class="token regex regex-delimiter" style="color:#36acaa" data-114-js-token="/-2-34">/</span><span class="token regex regex-flags" style="color:#36acaa" data-114-js-token="i-2-35">i</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-2-36">,</span><span class="token plain" data-114-js-token="-2-37"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34" data-114-js-token=":-3-6">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-114-js-token="&quot;asset/resource&quot;-3-8">&quot;asset/resource&quot;</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-3-24">,</span><span class="token plain" data-114-js-token="-3-25"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-114-js-token="-4-0"></span><span class="token punctuation" style="color:#393A34" data-114-js-token="}-4-0">}</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-4-1">,</span><span class="token plain" data-114-js-token="-4-2"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-114-js-token="-5-0"></span><span class="token punctuation" style="color:#393A34" data-114-js-token="{-5-0">{</span><span class="token plain" data-114-js-token="-5-1"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  test</span><span class="token operator" style="color:#393A34" data-114-js-token=":-6-6">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa" data-114-js-token="/-6-8">/</span><span class="token regex regex-source language-regex" style="color:#36acaa" data-114-js-token="\.(woff|woff2|eot|ttf|otf)$-6-9">\.(woff|woff2|eot|ttf|otf)$</span><span class="token regex regex-delimiter" style="color:#36acaa" data-114-js-token="/-6-36">/</span><span class="token regex regex-flags" style="color:#36acaa" data-114-js-token="i-6-37">i</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-6-38">,</span><span class="token plain" data-114-js-token="-6-39"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34" data-114-js-token=":-7-6">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-114-js-token="&quot;asset/resource&quot;-7-8">&quot;asset/resource&quot;</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-7-24">,</span><span class="token plain" data-114-js-token="-7-25"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-114-js-token="-8-0"></span><span class="token punctuation" style="color:#393A34" data-114-js-token="}-8-0">}</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-8-1">,</span><span class="token plain" data-114-js-token="-8-2"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-114-js-token="-9-0"></span><span class="token punctuation" style="color:#393A34" data-114-js-token="{-9-0">{</span><span class="token plain" data-114-js-token="-9-1"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  test</span><span class="token operator" style="color:#393A34" data-114-js-token=":-10-6">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa" data-114-js-token="/-10-8">/</span><span class="token regex regex-source language-regex" style="color:#36acaa" data-114-js-token="\.txt-10-9">\.txt</span><span class="token regex regex-delimiter" style="color:#36acaa" data-114-js-token="/-10-14">/</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-10-15">,</span><span class="token plain" data-114-js-token="-10-16"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34" data-114-js-token=":-11-6">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-114-js-token="&quot;asset/source&quot;-11-8">&quot;asset/source&quot;</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-11-22">,</span><span class="token plain" data-114-js-token="-11-23"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-114-js-token="-12-0"></span><span class="token punctuation" style="color:#393A34" data-114-js-token="}-12-0">}</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-12-1">,</span><span class="token plain" data-114-js-token="-12-2"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-114-js-token="-13-0"></span><span class="token punctuation" style="color:#393A34" data-114-js-token="{-13-0">{</span><span class="token plain" data-114-js-token="-13-1"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 通用文件则使用 asset，此时会按照默认条件自动决定是否转换为 Data URI</span><span class="token plain" data-114-js-token="-14-46"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  test</span><span class="token operator" style="color:#393A34" data-114-js-token=":-15-6">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa" data-114-js-token="/-15-8">/</span><span class="token regex regex-source language-regex" style="color:#36acaa" data-114-js-token="\.(?:ico|gif|png|jpg|jpeg)$-15-9">\.(?:ico|gif|png|jpg|jpeg)$</span><span class="token regex regex-delimiter" style="color:#36acaa" data-114-js-token="/-15-36">/</span><span class="token regex regex-flags" style="color:#36acaa" data-114-js-token="i-15-37">i</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-15-38">,</span><span class="token plain" data-114-js-token="-15-39"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34" data-114-js-token=":-16-6">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c" data-114-js-token="&quot;asset&quot;-16-8">&quot;asset&quot;</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-16-15">,</span><span class="token plain" data-114-js-token="-16-16"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  parser</span><span class="token operator" style="color:#393A34" data-114-js-token=":-17-8">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-114-js-token="{-17-10">{</span><span class="token plain" data-114-js-token="-17-11"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 如果文件大小小于 8kb，那么会转换为 data URI，否则为单独文件。</span><span class="token plain" data-114-js-token="-18-44"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 8kb 是默认值，你可以根据需要进行调整</span><span class="token plain" data-114-js-token="-19-27"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    dataUrlCondition</span><span class="token operator" style="color:#393A34" data-114-js-token=":-20-20">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34" data-114-js-token="{-20-22">{</span><span class="token plain" data-114-js-token="-20-23"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      maxSize</span><span class="token operator" style="color:#393A34" data-114-js-token=":-21-13">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa" data-114-js-token="8-21-15">8</span><span class="token plain"> </span><span class="token operator" style="color:#393A34" data-114-js-token="*-21-17">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa" data-114-js-token="1024-21-19">1024</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-21-23">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 8kb</span><span class="token plain" data-114-js-token="-21-31"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34" data-114-js-token="}-22-4">}</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-22-5">,</span><span class="token plain" data-114-js-token="-22-6"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34" data-114-js-token="}-23-2">}</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-23-3">,</span><span class="token plain" data-114-js-token="-23-4"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" data-114-js-token="-24-0"></span><span class="token punctuation" style="color:#393A34" data-114-js-token="}-24-0">}</span><span class="token punctuation" style="color:#393A34" data-114-js-token=",-24-1">,</span></div></pre></div><p>在Webpack 5中处理图片、文件、字体等资源类型非常简单，因为Webpack 5内置了资源模块（Asset Modules），这是一类模块类型，它允许使用资源文件（字体、图标等）而无需配置额外的loader。</p><p>资源模块提供了四种类型：</p><ul><li>asset/resource: 发送一个单独的文件并导出 URL。之前通过使用 file-loader 实现。</li><li>asset/inline: 导出一个资源的 data URI。之前通过使用 url-loader 实现。</li><li>asset/source: 导出资源的源代码。之前通过使用 raw-loader 实现。</li><li>asset: 在导出一个 data URI 和发送一个单独的文件之间自动选择。之前通过使用 url-loader 并且配置资源体积限制实现。 针对不同类型的资源，你可以按以下方式添加规则到Webpack配置</li></ul><p>以上是Webpack 5处理静态资源的基本配置，理解和使用资源模块可以使得资源处理更简单有效。这些配置项取代了之前在Webpack 4及以前需要使用的file-loader、url-loader和raw-loader。使用资源模块，配置变得更简洁明了，减少了构建配置的复杂性。在大多数情况下，默认的配置已经可以满足日常开发的需要。</p><h1 id="-写在最后"><a aria-hidden="true" tabindex="-1" href="/front_end_engineer_book//01docs/00actual_combat/06webpack5_basic_config#-写在最后"><span class="icon icon-link"></span></a>🍋 写在最后</h1><p>如果你看到这里了，并且觉得这篇文章对您有所帮助，希望你能够点赞👍和收藏⭐支持一下作者🙇🙇🙇，感谢🍺🍺！如果文中有任何不准确之处，也欢迎您指正，共同进步。感谢您的阅读，期待您的点赞👍和收藏⭐！</p><p>参考文章</p><ul><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/vortesnail/blog/issues/14">我是这样搭建Typescript+React项目环境的！<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 本文主要流程参考这篇文章，将文章中的包换成了相对较新的，解决了配置过程中存在的问题，增加了一些没有的配置</li></ul><p>感兴趣的同学可以关注下我的公众号ObjectX前端实验室</p><p>🌟 少走弯路 | ObjectX前端实验室 🛠️「精选资源｜实战经验｜技术洞见」</p></div><div class="__dumi-default-layout-footer-meta"><span data-updated-text="Last update: ">6/15/2024 07:19:04</span></div></article></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/front_end_engineer_book/umi.9ab99bfd.js"></script>
  </body>
</html>
